# Chat Resume — 2025-11-07 16:37

## Context
- Цель сессии — запуск версии "мультиграф" и подготовка новой кодовой базы в изолированной папке.
- Доступ к БД восстановлен через DBHub; подтверждена версия PostgreSQL 16.10 (Apache AGE).
- Все изменения существующего приложения оставлены нетронутыми; новая разработка пойдёт в `mgsrc/`.

## Выполнено
- Созданы графы `mg_blocks` и `mg_designs` с метками `block_type`, `block_edge`, `design_node`, `design_edge`.
- Добавлены первичные ключи, ограничения на петли и уникальные индексы, сохраняющие двунаправленную уникальность рёбер.
- Создана схема `mg` с таблицами `projects`, `design_to_block`, `design_edge_to_project` и необходимыми индексами/внешними ключами.
- Удалены временные артефакты (`mg_test`).
- Формализован план новой структуры кода (backend+frontend+mcp) — см. раздел "Next Steps".
- Детальное описание БД зафиксировано в документе [`docs/multigraph/cc-preliminary/25-1107/multigraph-architecture-overview.md`](../cc-preliminary/25-1107/multigraph-architecture-overview.md).

## Next Steps
- Развернуть структуру каталогов `mgsrc/`:
  - `web_app/backend` (REST API поверх новой БД).
  - `web_app/frontend` (новый клиент для работы с мультиграфом).
  - `shared` (общие модели/клиенты).
  - `mcp_service` (новый MCP-сервер, использующий backend API).
- Подготовить конфигурацию подключения и базовый CLI для smoke-тестов.
- Запланировать наполнение справочными "block types" и тестовыми проектами.

## Open Questions / Follow-up
- Нужен ли всё-таки универсальный триггер `mg.prevent_bidirectional_duplicate` (сейчас обходимся индексами)?
- Уточнить процесс деплоя (docker-compose/helm) и определить, когда поднимать отдельные контейнеры для backend/frontend/mcp.
- Сформировать первичный список типовых строительных блоков.

## Hand-off
Готов к продолжению: следующая сессия может сразу переходить к созданию структуры `mgsrc/` и инициализации backend.
