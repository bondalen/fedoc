# Задачи разработки multigraph (предложения)

Ниже приведена иерархия задач, которые можно включить в рабочий план реализации версии multigraph. Для фиксации факта выполнения под каждой задачей предусмотрен блок ссылок на резюме соответствующих чатов (`docs/multigraph/bb-chats`).

## 1. Backend (Flask + PostgreSQL/AGE)

### 1.1 Базовая структура
- [x] **1.1.1** Создать проект `mgsrc/backend`, пакет `fedoc_multigraph`, базовый `app.py`, `setup.py`, конфигурацию подключения к БД.  
  **Ссылки на выполнение:** [chat-25-1108-resume-23-10.md](../bb-chats/chat-25-1108-resume-23-10.md)
- [x] **1.1.2** Подготовить `requirements.txt`, настроить версионирование зависимостей, описать запуск в README backend.  
  **Ссылки на выполнение:** [chat-25-1108-resume-23-10.md](../bb-chats/chat-25-1108-resume-23-10.md)

### 1.2 REST API
- [x] **1.2.1** Реализовать CRUD для строительных блоков `/api/blocks`, включая валидацию входных данных и запись в `mg_blocks`.  
  **Ссылки на выполнение:** [chat-25-1109-resume-06-37.md](../bb-chats/chat-25-1109-resume-06-37.md), [chat-25-1109-resume-07-35.md](../bb-chats/chat-25-1109-resume-07-35.md)
- [x] **1.2.2** Реализовать CRUD для дизайнов `/api/designs`, связь дизайн ↔ блок через `mg.design_to_block`.  
  **Ссылки на выполнение:** [chat-25-1109-resume-09-45.md](../bb-chats/chat-25-1109-resume-09-45.md)
- [ ] **1.2.3** Реализовать API проектов `/api/projects`, выдачу комбинированного представления графа проекта и метаданных.  
  **Ссылки на выполнение:** *(нет)*
- [x] **1.2.4** Поддерживать health-check `/api/health`.  
  **Ссылки на выполнение:** [chat-25-1108-resume-23-10.md](../bb-chats/chat-25-1108-resume-23-10.md)

### 1.3 WebSocket и инфраструктура
- **1.3.1** Реализовать канал `/ws` для push-уведомлений об изменениях и обмена данными с фронтендом/MCP.  
  **Ссылки на выполнение:** *(нет)*
- **1.3.2** Настроить единый формат логирования, обработку ошибок и шаблоны ответов.  
  **Ссылки на выполнение:** *(нет)*

## 2. Frontend (Vue 3 + Vite)

### 2.1 Инициализация проекта
- **2.1.1** Настроить Vite-конфигурацию, подключить vis-network, создать базовые компоненты (панель, список узлов, холст графа).  
  **Ссылки на выполнение:** *(нет)*
- **2.1.2** Реализовать модуль работы с backend API (axios/fetch), методы для блоков, дизайнов, проектов.  
  **Ссылки на выполнение:** *(нет)*

### 2.2 Функциональность UI
- **2.2.1** Реализовать визуализацию графа: загрузка данных, выделение элементов, реакция на события WebSocket.  
  **Ссылки на выполнение:** *(нет)*
- **2.2.2** Добавить формы создания/редактирования блоков и дизайнов, управление связями.  
  **Ссылки на выполнение:** *(нет)*
- **2.2.3** Провести UX-полировку: уведомления, индикаторы загрузки, обработка ошибочных сценариев.  
  **Ссылки на выполнение:** *(нет)*

## 3. MCP-клиент (локальный)

### 3.1 Сервер MCP
- **3.1.1** Создать структуру `mgsrc/mcp_client`, базовый `server.py`, зарегистрировать команды.  
  **Ссылки на выполнение:** *(нет)*
- **3.1.2** Реализовать handlers для блоков и дизайнов: создание, чтение, обновление, удаление через backend API.  
  **Ссылки на выполнение:** *(нет)*

### 3.2 Интеграция с визуализацией
- **3.2.1** Добавить команду получения выделенных элементов из фронтенда через WebSocket.  
  **Ссылки на выполнение:** *(нет)*
- **3.2.2** Подготовить тестовые сценарии для Cursor AI (инструкции по вызову команд).  
  **Ссылки на выполнение:** *(нет)*

## 4. Развертывание и операции

### 4.1 Контейнер и скрипты
- **4.1.1** Подготовить `Dockerfile.base`, объединяющий PostgreSQL+AGE, Python и Supervisor.  
  **Ссылки на выполнение:** *(нет)*
- **4.1.2** Разработать скрипты `deploy.sh`, `update.sh`, `rollback.sh` для управления `.pyz`.  
  **Ссылки на выполнение:** *(нет)*
- **4.1.3** Описать CI-процедуру сборки `.pyz` и проверки подключения к БД.  
  **Ссылки на выполнение:** *(нет)*

### 4.2 Документация по развёртыванию
- **4.2.1** Обновить `dev/docker/DEPLOYMENT.md` и README с учётом multigraph.  
  **Ссылки на выполнение:** *(нет)*

## 5. Тестирование и контроль качества

### 5.1 Автотесты
- **5.1.1** Написать unit-тесты backend (pytest) для ключевых API и работы с БД.  
  **Ссылки на выполнение:** *(нет)*
- **5.1.2** Подготовить интеграционные сценарии: создание/обновление блоков, проверка графовых связей, WebSocket-событий.  
  **Ссылки на выполнение:** *(в работе — [chat-25-1109-resume-08-10.md](../bb-chats/chat-25-1109-resume-08-10.md))*

### 5.2 Проверка развертываний
- **5.2.1** Разработать smoke-тесты, выполняющие основные операции через API после деплоя.  
  **Ссылки на выполнение:** *(нет)*
- **5.2.2** Настроить базовый мониторинг и логирование здоровья сервиса.  
  **Ссылки на выполнение:** *(нет)*

## 6. Документация и сопровождение

### 6.1 Обновление артефактов
- **6.1.1** Регулярно актуализировать `aa-project.md` по мере завершения задач.  
  **Ссылки на выполнение:** *(нет)*
- **6.1.2** Вести журнал решений и тестов (`bb-chats`, `cc-preliminary`).  
  **Ссылки на выполнение:** *(нет)*

### 6.2 Пользовательские материалы
- **6.2.1** Подготовить гайды по работе с MCP, веб-интерфейсом и процессом обновлений.  
  **Ссылки на выполнение:** *(нет)*

> После выполнения конкретной задачи добавляйте ссылку на соответствующее резюме чата вида `[chat-25-1108-resume-10-55.md](../bb-chats/chat-25-1108-resume-10-55.md)` вместо пометки «*(нет)*». 