# fedoc multigraph ‚Äî MCP Bridge

**–í–µ—Ä—Å–∏—è:** 0.1.0  
**–î–∞—Ç–∞:** 2025-11-09  
**–°—Ç–∞—Ç—É—Å:** üöß –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ  
**–ê–≤—Ç–æ—Ä—ã:** –ê–ª–µ–∫—Å–∞–Ω–¥—Ä

–î–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –ø–ª–∞–Ω—ã —Ä–∞–∑–≤–∏—Ç–∏—è MCP-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ fedoc. MCP Bridge —Å–≤—è–∑—ã–≤–∞–µ—Ç Cursor AI —Å backend –∏ Graph Viewer –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏. –î–ª—è –æ–±—â–µ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —Å–º. `aa-project.md`, –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –ø–æ backend ‚Äî `ab-project-backend.md`, –ø–æ frontend ‚Äî `af-project-frontend.md`.

---

## üéØ –¶–µ–ª–∏ –∏ —Å—Ü–µ–Ω–∞—Ä–∏–∏

- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç—É Cursor –¥–æ—Å—Ç—É–ø –∫ –∞–∫—Ç—É–∞–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –ø—Ä–æ–µ–∫—Ç–∞ —á–µ—Ä–µ–∑ Model Context Protocol.
- –£–ø—Ä–∞–≤–ª—è—Ç—å Graph Viewer: –∑–∞–ø—É—Å–∫, –æ—Å—Ç–∞–Ω–æ–≤–∫–∞, –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞.
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤—ã–¥–µ–ª–µ–Ω–∏—è –∏ —Å–æ–±—ã—Ç–∏—è —Å WebSocket hub (`/ws`) –≤ –æ–±–µ —Å—Ç–æ—Ä–æ–Ω—ã (–∑–∞–¥–∞—á–∞ –±–ª–æ–∫–∞ 1.3.2).
- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å —É–¥–æ–±–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏ –∞—Ä—Ö–∏–≤–∞ —Ä–µ—à–µ–Ω–∏–π (roadmap).

---

## üì¶ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Python 3.10+
- –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ (`venv`) –ø—Ä–æ–µ–∫—Ç–∞ `fedoc`.
- –î–æ—Å—Ç—É–ø –∫ ArangoDB (—á–µ—Ä–µ–∑ SSH-—Ç—É–Ω–Ω–µ–ª—å `8529`) –∏ backend API (`8080`).

### –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ (–Ω–æ–≤–∞—è –≤–µ—Ç–∫–∞ multigraph)
```bash
cd mgsrc/mcp_bridge
python -m venv venv
source venv/bin/activate
pip install -r requirements.txt
python -m mcp_bridge.run_bridge  # (–±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ—Å–ª–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ MCP-–ø—Ä–æ—Ç–æ–∫–æ–ª–∞)
```

> –í–∞–∂–Ω–æ: —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π `src/mcp_server` –∏–∑ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–π –≤–µ—Ä—Å–∏–∏ fedoc –æ—Å—Ç–∞—ë—Ç—Å—è –Ω–µ–∏–∑–º–µ–Ω–Ω—ã–º ‚Äî –Ω–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ö—Ä–∞–Ω–∏—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ –≤ `mgsrc/mcp_bridge`.

### Production (–ø–ª–∞–Ω)
- MCP Bridge —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å —Ä—è–¥–æ–º —Å backend `.pyz`.
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º —á–µ—Ä–µ–∑ Supervisor/PM2 (–∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ backend).
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ HTTPS-—Ç—É–Ω–Ω–µ–ª—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ—Å–ª–µ —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞.

---

## üõ†Ô∏è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞—Ç–∞–ª–æ–≥–∞ `mgsrc/mcp_bridge`
```
mgsrc/mcp_bridge/
‚îú‚îÄ‚îÄ mcp_bridge/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py                # –≠–∫—Å–ø–æ—Ä—Ç BridgeConfig, MCPBridge, WebSocketBridge
‚îÇ   ‚îú‚îÄ‚îÄ config.py                  # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (env ‚Üí BridgeConfig)
‚îÇ   ‚îú‚îÄ‚îÄ server.py                  # MCP Bridge API (push_selection, poll_graph_updates)
‚îÇ   ‚îî‚îÄ‚îÄ websocket_bridge.py        # –û–±—ë—Ä—Ç–∫–∞ –Ω–∞–¥ WebSocket hub (/ws)
‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îú‚îÄ‚îÄ test_mcp_bridge.py
‚îÇ   ‚îî‚îÄ‚îÄ test_websocket_bridge.py
‚îú‚îÄ‚îÄ requirements.txt
‚îî‚îÄ‚îÄ README.md
```

### –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å
- ‚úÖ –°–æ–∑–¥–∞–Ω–æ –æ—Ç–¥–µ–ª—å–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –∫–æ–¥–∞ `mgsrc/mcp_bridge`, –Ω–µ –∑–∞–≤–∏—Å—è—â–µ–µ –æ—Ç –ø—Ä–µ–∂–Ω–µ–≥–æ `src/mcp_server`.
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω `WebSocketBridge` –Ω–∞ `python-socketio` —Å –∞–≤—Ç–æ–ø–æ–¥–ø–∏—Å–∫–æ–π –Ω–∞ `graph_updates` –∏ `selection_updates`.
- ‚úÖ –ö–ª–∞—Å—Å `MCPBridge` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç API –¥–ª—è MCP-–∫–æ–º–∞–Ω–¥ (`push_selection`, `get_selection_snapshot`, `poll_graph_updates`).
- ‚úÖ –ù–∞–ø–∏—Å–∞–Ω—ã unit-—Ç–µ—Å—Ç—ã (pytest) –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É —Å–æ–±—ã—Ç–∏–π –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤—ã–¥–µ–ª–µ–Ω–∏–π.
- üöß –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å MCP –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–º (`mcp` –±–∏–±–ª–∏–æ—Ç–µ–∫–∞) –∏ CLI/daemon.
- üöß –ö–æ–º–∞–Ω–¥—ã —Ä–∞–±–æ—Ç—ã —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π/Arango –≤ –Ω–æ–≤–æ–π –≤–µ—Ç–∫–µ.

### Roadmap (–≤—ã–¥–µ—Ä–∂–∫–∞ –∏–∑ `bb-tasks` 1.3.* –∏ 3.*)
- **1.3.2** MCP Bridge: —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤—ã–¥–µ–ª–µ–Ω–∏–π —Å WebSocket hub, —Ä–µ—Ç—Ä–∞–Ω—Å–ª—è—Ü–∏—è —Å–æ–±—ã—Ç–∏–π.
- **3.1.1** –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ MCP –∫–ª–∏–µ–Ω—Ç–∞ (–≤—ã–ø–æ–ª–Ω–µ–Ω–æ).
- **3.1.2** CRUD-–∫–æ–º–∞–Ω–¥—ã –¥–ª—è –±–ª–æ–∫–æ–≤ –∏ –¥–∏–∑–∞–π–Ω–æ–≤ (–ø–ª–∞–Ω).
- **3.2.1** –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—ã–¥–µ–ª–µ–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∏–∑ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç Bridge).
- **3.2.2** –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –¥–ª—è Cursor AI (–ø–æ—Å–ª–µ –∏–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏–∏ Bridge).

---

## üîå –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

- **Backend API:** REST endpoints backend (–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ handlers –±—É–¥—É—â–µ–≥–æ MCP).
- **Graph Viewer:** —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ —Å—Ç–∞—Ä—ã–π MCP —Å–µ—Ä–≤–µ—Ä (–¥–æ –º–∏–≥—Ä–∞—Ü–∏–∏) –∏ —á–µ—Ä–µ–∑ –Ω–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è).
- **WebSocket hub:** `ws://localhost:8080/ws`; –∫–ª–∏–µ–Ω—Ç—Å–∫–∞—è —á–∞—Å—Ç—å –≤ `WebSocketBridge`.
- **ArangoDB:** –ø–æ–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å—Ç–∞—Ä–æ–π –≤–µ—Ç–∫–æ–π; –¥–ª—è multigraph –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –Ω–æ–≤—ã–π –Ω–∞–±–æ—Ä –∫–æ–º–∞–Ω–¥.

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ —Å—Å—ã–ª–∫–∏

- [README MCP Bridge](../../mgsrc/mcp_bridge/README.md)
- [README MCP —Å–µ—Ä–≤–µ—Ä–∞ (–ø—Ä–µ–¥—ã–¥—É—â–∞—è –≤–µ—Ä—Å–∏—è)](../../src/mcp_server/README.md)
- [–ü—Ä–æ—Ç–æ–∫–æ–ª WebSocket](../cc-preliminary/25-1109/ws-channel-requirements.md)
- [–û–±—Ö–æ–¥ –≥—Ä–∞—Ñ–∞ (sys-001)](../cc-preliminary/25-1109/testing-ci-deep-dive.md) ‚Äî —Ä–∞–∑–¥–µ–ª —Å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏ —á–µ–∫-–ª–∏—Å—Ç–∞–º–∏
- [bb-chats](../bb-chats/) ‚Äî —Ä–µ–∑—é–º–µ —á–∞—Ç–æ–≤ –ø–æ MCP (–±—É–¥–µ—Ç —Ä–∞—Å—à–∏—Ä—è—Ç—å—Å—è)

---

## ‚úÖ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –î–æ–ø–æ–ª–Ω–∏—Ç—å `mgsrc/mcp_bridge` —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π MCP RPC (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π `mcp` –∏ Cursor).
2. –î–æ–±–∞–≤–∏—Ç—å CLI/daemon `run_bridge.py` –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º WebSocket hub.
3. –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã —Å—Ç–∞—Ä–æ–≥–æ MCP —Å–µ—Ä–≤–µ—Ä–∞ –≤ –Ω–æ–≤—É—é –∫–æ–¥–æ–≤—É—é –±–∞–∑—É –±–µ–∑ –≤–ª–∏—è–Ω–∏—è –Ω–∞ –æ–±—Ä–∞—Ç–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å.
4. –ó–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ MCP Bridge ‚Üî Cursor (–ø—Ä–∏–º–µ—Ä `.cursor/mcp.json`, —Å—Ü–µ–Ω–∞—Ä–∏–∏).

