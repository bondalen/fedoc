# fedoc multigraph โ ะัะฝะพะฒะฝะฐั ะฟัะพะตะบัะฝะฐั ะดะพะบัะผะตะฝัะฐัะธั

**ะะตััะธั:** 1.0.0  
**ะะฐัะฐ:** 2025-11-08  
**ะกัะฐััั:** ๐ง ะ ัะฐะทัะฐะฑะพัะบะต (ััะฐะดะธั ะฟัะพะตะบัะธัะพะฒะฐะฝะธั)  
**ะะฒัะพัั:** ะะปะตะบัะฐะฝะดั

---

## ๐ ะ ะฟัะพะตะบัะต

**fedoc multigraph** โ ััะพ ะฝะพะฒะฐั ะฒะตััะธั ัะธััะตะผั fedoc, ัะตะฐะปะธะทัััะฐั ะบะพะฝัะตะฟัะธั ะผัะปััะธะณัะฐัะฐ ะดะปั ัะฟัะฐะฒะปะตะฝะธั ะฐััะธัะตะบัััะฝัะผะธ ะฑะปะพะบะฐะผะธ ะธ ะฟัะพะตะบัะฝัะผะธ ะดะธะทะฐะนะฝะฐะผะธ.

### ะะปััะตะฒัะต ะบะพะฝัะตะฟัะธะธ

**ะัะปััะธะณัะฐั** ัะพััะพะธั ะธะท ะดะฒัั ะฒะทะฐะธะผะพัะฒัะทะฐะฝะฝัั ะณัะฐัะพะฒ:

1. **mg_blocks** โ ะณัะฐั ัััะพะธัะตะปัะฝัั ะฑะปะพะบะพะฒ (building blocks)
   - ะะตัะตะธัะฟะพะปัะทัะตะผัะต ะฐััะธัะตะบัััะฝัะต ะบะพะผะฟะพะฝะตะฝัั
   - ะขะตัะฝะพะปะพะณะธะธ, ะฟะฐััะตัะฝั, ะบะพะฝัะตะฟัะธะธ
   - ะฃะฝะธะฒะตััะฐะปัะฝั ะดะปั ะฒัะตั ะฟัะพะตะบัะพะฒ

2. **mg_designs** โ ะณัะฐั ะฟัะพะตะบัะฝัั ะดะธะทะฐะนะฝะพะฒ
   - ะะพะฝะบัะตัะฝัะต ัะตะฐะปะธะทะฐัะธะธ ะดะปั ะฟัะพะตะบัะพะฒ
   - ะกะฒัะทั ะดะธะทะฐะนะฝะฐ ั ะฑะปะพะบะฐะผะธ (many-to-many)
   - ะัะธะฒัะทะบะฐ ััะฑะตั ะบ ะฟัะพะตะบัะฐะผ

### ะัะปะธัะธั ะพั ะฑะฐะทะพะฒะพะน ะฒะตััะธะธ fedoc

| ะัะฟะตะบั | fedoc (ะฑะฐะทะพะฒัะน) | fedoc multigraph |
|--------|-----------------|------------------|
| **ะัะฐั** | ะะดะธะฝ ะพะฑัะธะน ะณัะฐั | ะะฒะฐ ะพัะดะตะปัะฝัั ะณัะฐัะฐ + ัะฒัะทะธ |
| **ะะปะพะบะธ** | ะฃะทะปั ะฒ ะพะฑัะตะผ ะณัะฐัะต | ะัะดะตะปัะฝัะน ะณัะฐั ะฑะปะพะบะพะฒ |
| **ะัะพะตะบัั** | ะคะธะปััั ะฟะพ ััะฑัะฐะผ | ะกะฒัะทั design โ block |
| **ะะธะฑะบะพััั** | ะกัะตะดะฝัั | ะััะพะบะฐั |
| **ะกะปะพะถะฝะพััั** | ะะธะทะบะฐั | ะกัะตะดะฝัั |

---

## ๐ฏ ะฆะตะปะธ ะธ ะทะฐะดะฐัะธ

### ะัะฝะพะฒะฝัะต ัะตะปะธ

1. **ะะตัะตะธัะฟะพะปัะทะพะฒะฐะฝะธะต ะฐััะธัะตะบัััะฝัั ัะตัะตะฝะธะน**
   - ะกะพะทะดะฐะฝะธะต ะฑะธะฑะปะธะพัะตะบะธ ัััะพะธัะตะปัะฝัั ะฑะปะพะบะพะฒ
   - ะััััะฐั ัะฑะพัะบะฐ ะฝะพะฒัั ะฟัะพะตะบัะพะฒ ะธะท ะณะพัะพะฒัั ะฑะปะพะบะพะฒ

2. **ะะธะฑะบะพะต ัะฟัะฐะฒะปะตะฝะธะต ะฟัะพะตะบัะฐะผะธ**
   - ะะดะธะฝ ะดะธะทะฐะนะฝ ะผะพะถะตั ะธัะฟะพะปัะทะพะฒะฐัั ะผะฝะพะณะพ ะฑะปะพะบะพะฒ
   - ะะดะธะฝ ะฑะปะพะบ ะผะพะถะตั ะฟัะธะผะตะฝััััั ะฒะพ ะผะฝะพะณะธั ะดะธะทะฐะนะฝะฐั

3. **ะฆะตะฝััะฐะปะธะทะพะฒะฐะฝะฝะพะต ััะฐะฝะตะฝะธะต ะทะฝะฐะฝะธะน**
   - ะะฐะบะพะฟะปะตะฝะธะต ะปัััะธั ะฟัะฐะบัะธะบ ะฒ ะฑะปะพะบะฐั
   - ะญะฒะพะปััะธั ะฑะปะพะบะพะฒ ะฝะตะทะฐะฒะธัะธะผะพ ะพั ะฟัะพะตะบัะพะฒ

### ะกัะตะฝะฐัะธะธ ะธัะฟะพะปัะทะพะฒะฐะฝะธั

**ะัะฝะพะฒะฝะพะน ะฟะพะปัะทะพะฒะฐัะตะปั:** ะะดะธะฝะพัะฝัะน ัะฐะทัะฐะฑะพััะธะบ, ัะฟัะฐะฒะปัััะธะน ะณััะฟะฟะพะน ะฟัะพะตะบัะพะฒ

**Workflow:**
```
1. ะะฐะทัะฐะฑะพััะธะบ ัะพะทะดะฐัั ัััะพะธัะตะปัะฝัะต ะฑะปะพะบะธ (Backend, Database, API Gateway)
2. ะัะพะตะบัะธััะตั ะฐััะธัะตะบัััั ะฝะพะฒะพะณะพ ะฟัะพะตะบัะฐ, ัะฒัะทัะฒะฐั ะดะธะทะฐะนะฝ ั ะฑะปะพะบะฐะผะธ
3. ะะฐะฑะพัะฐะตั ัะตัะตะท Cursor AI + MCP ะดะปั ัะฟัะฐะฒะปะตะฝะธั ะณัะฐัะพะผ
4. ะะธะทัะฐะปะธะทะธััะตั ัะตัะตะท ะฒะตะฑ-ะธะฝัะตััะตะนั ะดะปั ะพะฑะทะพัะฐ
5. ะัะฟะพะปัะทัะตั MCP ะดะปั ะณะตะฝะตัะฐัะธะธ ะดะพะบัะผะตะฝัะฐัะธะธ ะธ ะฟัะฐะฒะธะป
```

---

## ๐๏ธ ะััะธัะตะบัััะฐ

### ะกะธััะตะผะฝะฐั ะฐััะธัะตะบัััะฐ

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ะฃะดะฐะปะตะฝะฝัะน ัะตัะฒะตั (fedoc-server)                         โ
โ                                                           โ
โ  Docker Container: fedoc-multigraph (ะะะกะขะะฏะะะซะ)         โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ PostgreSQL 16 + Apache AGE                         โ โ
โ  โ   โโ mg_blocks (graph)                             โ โ
โ  โ   โโ mg_designs (graph)                            โ โ
โ  โ   โโ mg (relational schema)                        โ โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค โ
โ  โ Flask Backend + Frontend (ััะฐัะธะบะฐ)                โ โ
โ  โ   โโ REST API (/api/*)                             โ โ
โ  โ   โโ WebSocket (/ws)                               โ โ
โ  โ   โโ Static files (/, /assets/*)                   โ โ
โ  โ                                                     โ โ
โ  โ ะฃะฟะฐะบะพะฒะบะฐ: fedoc-multigraph.pyz (Shiv)             โ โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                โ SSH Tunnel
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ะะพะบะฐะปัะฝะฐั ะผะฐัะธะฝะฐ ัะฐะทัะฐะฑะพััะธะบะฐ                          โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ Cursor AI โ MCP-fedoc (localhost)                 โ โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ ะัะฐัะทะตั: http://localhost:8080                     โ โ
โ  โ   - ะะธะทัะฐะปะธะทะฐัะธั ะผัะปััะธะณัะฐัะฐ                       โ โ
โ  โ   - ะะตะดะฐะบัะธัะพะฒะฐะฝะธะต ะฑะปะพะบะพะฒ ะธ ะดะธะทะฐะนะฝะพะฒ               โ โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### ะขะตัะฝะพะปะพะณะธัะตัะบะธะน ััะตะบ

| ะะพะผะฟะพะฝะตะฝั | ะขะตัะฝะพะปะพะณะธั | ะะตััะธั | ะะฑะพัะฝะพะฒะฐะฝะธะต |
|-----------|-----------|--------|-------------|
| **ะะฐะทะฐ ะดะฐะฝะฝัั** | PostgreSQL + Apache AGE | 16.10 / 1.6.0 | ะัะฐัะพะฒัะต ะทะฐะฟัะพัั + ัะตะปััะธะพะฝะฝะฐั ััะตะผะฐ |
| **Backend** | Flask | 3.0+ | ะัะพััะพัะฐ, ัะตะบััะธะน ััะตะบ fedoc |
| **Frontend** | Vue.js + Vite | 3.5 / 5.4 | ะะตะฐะบัะธะฒะฝะพััั, ัะตะบััะธะน ััะตะบ Graph Viewer |
| **ะฃะฟะฐะบะพะฒะบะฐ** | Shiv (Python) | latest | ะะดะธะฝัะน .pyz ะฐััะตัะฐะบั (~30-40 MB) |
| **ะะฐะทะฒะตัััะฒะฐะฝะธะต** | Docker (ะผะพะฝะพะปะธั) | latest | ะะดะธะฝ ะบะพะฝัะตะนะฝะตั, ัะบะพะฝะพะผะธั ัะตััััะพะฒ |
| **MCP** | Python | 3.10+ | ะะฝัะตะณัะฐัะธั ั Cursor AI |
| **ะะธะทัะฐะปะธะทะฐัะธั** | vis-network | latest | ะะฝัะตัะฐะบัะธะฒะฝัะต ะณัะฐัั |

### ะััะธัะตะบัััะฝัะต ัะตัะตะฝะธั

1. **ะะพะฝะพะปะธัะฝัะน ะบะพะฝัะตะนะฝะตั** ะฒะผะตััะพ ะผะธะบัะพัะตัะฒะธัะพะฒ
   - **ะัะธัะธะฝะฐ:** ะะดะธะฝ ะฟะพะปัะทะพะฒะฐัะตะปั, ะพะณัะฐะฝะธัะตะฝะฝัะต ัะตััััั
   - **Trade-off:** ะะตะฝััะต ะณะธะฑะบะพััะธ, ะฝะพ ะฟัะพัะต ัะฟัะฐะฒะปะตะฝะธะต

2. **Flask** ะฒะผะตััะพ FastAPI
   - **ะัะธัะธะฝะฐ:** ะะพััะฐัะพัะฝะพ ะดะปั ะผะฐะปะพะน ะฝะฐะณััะทะบะธ
   - **Trade-off:** ะะตั async, ะฝะพ ะผะตะฝััะต ัะปะพะถะฝะพััะธ

3. **Python Shiv (.pyz)** ะฒะผะตััะพ Java JAR
   - **ะัะธัะธะฝะฐ:** ะะฝะฐะบะพะผัะน ััะตะบ, ะผะตะฝััะต RAM, ะฑัััััะน ััะฐัั
   - **Trade-off:** ะะตะฝะตะต ัะฐัะฟัะพัััะฐะฝะตะฝ, ะฝะพ ัะฐะฑะพัะฐะตั ะพัะปะธัะฝะพ
   - **ะะพะดัะฒะตัะถะดะตะฝะธะต:** ัะฒัะทะบะฐ ะฟัะพัะตััะธัะพะฒะฐะฝะฐ ะฒ ะบะพะฝัะตะนะฝะตัะต `apache/age`; ะดะตัะฐะปะธ โ ะฒ [psycopg2-shiv-test.md](../cc-preliminary/25-1108/psycopg2-shiv-test.md)

4. **Supervisor** ะดะปั ัะฟัะฐะฒะปะตะฝะธั ะฟัะพัะตััะฐะผะธ
   - **ะัะธัะธะฝะฐ:** PostgreSQL + Flask ะฒ ะพะดะฝะพะผ ะบะพะฝัะตะนะฝะตัะต
   - **Trade-off:** ะะต Kubernetes, ะฝะพ ะดะพััะฐัะพัะฝะพ

ะะพะดัะพะฑะฝะตะต: [ะะพะบัะผะตะฝั ะฐััะธัะตะบัััะฝะพะณะพ ัะตัะตะฝะธั](../cc-preliminary/25-1108/chat-session-architecture-design.md)

---

## ๐พ ะะพะดะตะปั ะดะฐะฝะฝัั

### ะัะฐัั Apache AGE

#### mg_blocks โ ะัะฐั ัััะพะธัะตะปัะฝัั ะฑะปะพะบะพะฒ

**ะะตััะธะฝั (block_type):**
```cypher
{
  id: graphid,           # ะฃะฝะธะบะฐะปัะฝัะน ID
  properties: {
    name: string,        # ะะฐะทะฒะฐะฝะธะต ะฑะปะพะบะฐ
    description: string, # ะะฟะธัะฐะฝะธะต
    type: string,        # ะขะธะฟ: "concept", "technology", "pattern"
    metadata: {}         # ะะพะฟะพะปะฝะธัะตะปัะฝัะต ัะฒะพะนััะฒะฐ
  }
}
```

**ะัะฑัะฐ (block_edge):**
```cypher
{
  id: graphid,
  start_id: graphid,     # ะะพะดะธัะตะปััะบะธะน ะฑะปะพะบ
  end_id: graphid,       # ะะพัะตัะฝะธะน ะฑะปะพะบ
  properties: {
    relation_type: string, # "contains", "depends-on", "extends"
    weight: float          # ะะตั ัะฒัะทะธ
  }
}
```

**ะะณัะฐะฝะธัะตะฝะธั:**
- Primary key ะฝะฐ `id`
- ะะฐะฟัะตั ะฟะตัะตะปั: `CHECK (NOT graphid_eq(start_id, end_id))`
- ะะฒัะฝะฐะฟัะฐะฒะปะตะฝะฝะฐั ัะฝะธะบะฐะปัะฝะพััั: `UNIQUE (LEAST(start_id,end_id), GREATEST(start_id,end_id))`

#### mg_designs โ ะัะฐั ะฟัะพะตะบัะฝัั ะดะธะทะฐะนะฝะพะฒ

**ะะตััะธะฝั (design_node):**
```cypher
{
  id: graphid,
  properties: {
    name: string,        # ะะฐะทะฒะฐะฝะธะต ัะปะตะผะตะฝัะฐ ะดะธะทะฐะนะฝะฐ
    description: string,
    status: string,      # "draft", "active", "deprecated"
    created_at: timestamp
  }
}
```

**ะัะฑัะฐ (design_edge):**
```cypher
{
  id: graphid,
  start_id: graphid,
  end_id: graphid,
  properties: {
    relation_type: string, # "contains", "uses", "depends-on"
    metadata: {}
  }
}
```

**ะะณัะฐะฝะธัะตะฝะธั:** ะขะต ะถะต, ััะพ ั mg_blocks

### ะะตะปััะธะพะฝะฝะฐั ััะตะผะฐ (mg)

#### mg.projects
```sql
id           serial PRIMARY KEY,
name         varchar UNIQUE NOT NULL,
description  text,
created_at   timestamptz DEFAULT now()
```

#### mg.design_to_block
```sql
design_id  graphid PRIMARY KEY โ mg_designs.design_node(id),
block_id   graphid NOT NULL    โ mg_blocks.block_type(id)
```

ะกะฒัะทั many-to-many: ะพะดะธะฝ design ะผะพะถะตั ัััะปะฐัััั ะฝะฐ ะผะฝะพะณะพ ะฑะปะพะบะพะฒ.

#### mg.design_edge_to_project
```sql
edge_id     graphid โ mg_designs.design_edge(id),
project_id  integer โ mg.projects(id),
PRIMARY KEY (edge_id, project_id)
```

ะกะฒัะทั many-to-many: ะพะดะฝะพ ัะตะฑัะพ ะดะธะทะฐะนะฝะฐ ะผะพะถะตั ะฑััั ะฒ ะฝะตัะบะพะปัะบะธั ะฟัะพะตะบัะฐั.

### ะะธะฐะณัะฐะผะผะฐ ัะฒัะทะตะน

```
โโโโโโโโโโโโโโโโโโโ         โโโโโโโโโโโโโโโโโโโ
โ   mg_blocks     โ         โ   mg_designs    โ
โ  (graph AGE)    โ         โ  (graph AGE)    โ
โ                 โ         โ                 โ
โ โโโโโโโโโโโโโโโ โ         โ โโโโโโโโโโโโโโโ โ
โ โ block_type  โ โ         โ โ design_node โ โ
โ โ (vertices)  โ โโโโโโโโโโโค โ (vertices)  โ โ
โ โโโโโโโโโโโโโโโ โ         โ โโโโโโโโโโโโโโโ โ
โ       โ         โ         โ       โ         โ
โ       โ         โ         โ       โ         โ
โ โโโโโโโโโโโโโโโ โ         โ โโโโโโโโโโโโโโโ โ
โ โ block_edge  โ โ         โ โ design_edge โ โ
โ โ (edges)     โ โ         โ โ (edges)     โ โ
โ โโโโโโโโโโโโโโโ โ         โ โโโโโโโโโโโโโโโ โ
โโโโโโโโโโโโโโโโโโโ         โโโโโโโโโโโโโโโโโโโ
        โฒ                           โฒ    โ
        โ                           โ    โ
        โ   mg.design_to_block      โ    โ
        โโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โ
                                         โ
                                         โ
                    โโโโโโโโโโโโโโโโโโโโโโ
                    โ
                    โผ
        โโโโโโโโโโโโโโโโโโโโโโโโโ
        โ mg.design_edge_to_    โ
        โ   project             โ
        โ                       โ
        โ โโโโโโโโโโโโโโโโโโโโโ โ
        โ โ   mg.projects     โ โ
        โ โโโโโโโโโโโโโโโโโโโโโ โ
        โโโโโโโโโโโโโโโโโโโโโโโโโ
```

ะะพะดัะพะฑะฝะตะต: [Database Architecture Overview](../cc-preliminary/25-1107/multigraph-architecture-overview.md)

---

## ๐ API

### REST API Endpoints

**Blocks (ัััะพะธัะตะปัะฝัะต ะฑะปะพะบะธ):**
```
GET    /api/blocks              # ะกะฟะธัะพะบ ะฒัะตั ะฑะปะพะบะพะฒ
GET    /api/blocks/:id          # ะะพะปััะธัั ะฑะปะพะบ
POST   /api/blocks              # ะกะพะทะดะฐัั ะฑะปะพะบ
PUT    /api/blocks/:id          # ะะฑะฝะพะฒะธัั ะฑะปะพะบ
DELETE /api/blocks/:id          # ะฃะดะฐะปะธัั ะฑะปะพะบ

GET    /api/blocks/:id/children # ะะพัะตัะฝะธะต ะฑะปะพะบะธ
GET    /api/blocks/:id/graph    # ะะพะดะณัะฐั ะพั ะฑะปะพะบะฐ
```

**Designs (ะฟัะพะตะบัะฝัะต ะดะธะทะฐะนะฝั):**
```
GET    /api/designs             # ะกะฟะธัะพะบ ะดะธะทะฐะนะฝะพะฒ
GET    /api/designs/:id         # ะะพะปััะธัั ะดะธะทะฐะนะฝ
POST   /api/designs             # ะกะพะทะดะฐัั ะดะธะทะฐะนะฝ
PUT    /api/designs/:id         # ะะฑะฝะพะฒะธัั ะดะธะทะฐะนะฝ
DELETE /api/designs/:id         # ะฃะดะฐะปะธัั ะดะธะทะฐะนะฝ

GET    /api/designs/:id/blocks  # ะกะฒัะทะฐะฝะฝัะต ะฑะปะพะบะธ
POST   /api/designs/:id/blocks  # ะะพะฑะฐะฒะธัั ะฑะปะพะบ ะบ ะดะธะทะฐะนะฝั
DELETE /api/designs/:id/blocks/:block_id # ะฃะดะฐะปะธัั ัะฒัะทั
```

**Projects (ะฟัะพะตะบัั):**
```
GET    /api/projects            # ะกะฟะธัะพะบ ะฟัะพะตะบัะพะฒ
GET    /api/projects/:id        # ะะพะปััะธัั ะฟัะพะตะบั
POST   /api/projects            # ะกะพะทะดะฐัั ะฟัะพะตะบั
PUT    /api/projects/:id        # ะะฑะฝะพะฒะธัั ะฟัะพะตะบั
DELETE /api/projects/:id        # ะฃะดะฐะปะธัั ะฟัะพะตะบั

GET    /api/projects/:id/graph  # ะัะฐั ะฟัะพะตะบัะฐ (ะดะธะทะฐะนะฝั + ะฑะปะพะบะธ)
```

### WebSocket API

**ะะพะดะบะปััะตะฝะธะต:** `ws://localhost:8080/ws`

**ะกะพะฑััะธั (Client โ Server):**
```json
{
  "type": "subscribe",
  "channel": "graph_updates"
}

{
  "type": "get_selected_nodes"
}
```

**ะกะพะฑััะธั (Server โ Client):**
```json
{
  "type": "graph_updated",
  "data": {
    "entity_type": "block",
    "entity_id": "123",
    "action": "created"
  }
}

{
  "type": "selected_nodes",
  "data": {
    "nodes": ["id1", "id2"],
    "edges": ["edge1"]
  }
}
```

---

## ๐ง MCP Integration

### MCP Commands

**ะะฐะฑะพัะฐ ั ะฑะปะพะบะฐะผะธ:**
```python
# ะกะพะทะดะฐัั ะฑะปะพะบ
mcp.call("create_block", {
    "name": "API Gateway",
    "type": "technology",
    "description": "..."
})

# ะะพะปััะธัั ะดะพัะตัะฝะธะต ะฑะปะพะบะธ
mcp.call("get_block_children", {
    "block_id": "123"
})
```

**ะะฐะฑะพัะฐ ั ะดะธะทะฐะนะฝะฐะผะธ:**
```python
# ะกะพะทะดะฐัั ะดะธะทะฐะนะฝ
mcp.call("create_design", {
    "name": "User Service Architecture",
    "project_id": 1
})

# ะกะฒัะทะฐัั ะดะธะทะฐะนะฝ ั ะฑะปะพะบะพะผ
mcp.call("link_design_to_block", {
    "design_id": "456",
    "block_id": "123"
})
```

**ะะธะทัะฐะปะธะทะฐัะธั:**
```python
# ะัะบัััั ะฒะตะฑ-ะธะฝัะตััะตะนั
mcp.call("open_graph_viewer", {
    "project_id": 1
})

# ะะพะปััะธัั ะฒัะดะตะปะตะฝะฝัะต ัะปะตะผะตะฝัั ะธะท ะฑัะฐัะทะตัะฐ
selected = mcp.call("get_selected_elements")
```

---

## ๐ฆ ะะฐะทะฒะตัััะฒะฐะฝะธะต

Backend multigraph ัะฐะทะฒััััะฒะฐะตััั ะฒ ะผะพะฝะพะปะธัะฝะพะผ ะบะพะฝัะตะนะฝะตัะต ะฒะผะตััะต ั PostgreSQL + Apache AGE ะธ ัะฟัะฐะฒะปัะตััั Supervisor. ะะพะดัะพะฑะฝัะต ะธะฝััััะบัะธะธ ะฟะพ ัะฑะพัะบะต ะพะฑัะฐะทะฐ, ะฟะตัะฒะธัะฝะพะผั ัะฐะทะฒััััะฒะฐะฝะธั, ะพะฑะฝะพะฒะปะตะฝะธั `.pyz` ะธ ะพัะบะฐัั ะฟัะธะฒะตะดะตะฝั ะฒ [ab-project-backend.md](ab-project-backend.md#๐ฆ-ัะฐะทะฒะตัััะฒะฐะฝะธะต).

ะะปััะตะฒัะต ะฟัะธะฝัะธะฟั ะฝะฐ ััะพะฒะฝะต ะฟัะพะตะบัะฐ:
- ะพะดะธะฝ ะบะพะฝัะตะนะฝะตั, `bind`-ะผะพะฝัะฐะถ `/app` ะดะปั ัะฐะทะผะตัะตะฝะธั `.pyz`;
- ะพะฑะฝะพะฒะปะตะฝะธั ะฒัะฟะพะปะฝััััั ะทะฐะผะตะฝะพะน ะฐััะตัะฐะบัะฐ ะธ ัะตััะฐััะพะผ ะฟัะธะปะพะถะตะฝะธั (ะะ ะฝะต ะฟะตัะตะทะฐะฟััะบะฐะตััั);
- ัะตัะฒะธั ะดะพัััะฟะตะฝ ัะพะปัะบะพ ัะตัะตะท SSH tunnel, ะฒะฝะตัะฝะธะต ะฟะพััั ะฝะต ะฟัะฑะปะธะบััััั.

---

## ๐๏ธ ะะฐะทัะฐะฑะพัะบะฐ

ะะฝัััะตะฝะฝัั ััััะบัััะฐ ะบะฐัะฐะปะพะณะฐ `mgsrc/`, ััะตะฝะฐัะธะธ ะปะพะบะฐะปัะฝะพะน ัะฐะทัะฐะฑะพัะบะธ ะธ ะฟัะพัะตัั ัะฑะพัะบะธ `.pyz` ะพะฟะธัะฐะฝั ะฒ [ab-project-backend.md](ab-project-backend.md#๐๏ธ-ัะฐะทัะฐะฑะพัะบะฐ). ะะฐ ััะพะฒะฝะต ะฟัะพะตะบัะฐ ะฒะฐะถะฝะพ ะฟะพะผะฝะธัั, ััะพ backend ะฟัะฑะปะธะบัะตั REST ะธ WebSocket ะธะฝัะตััะตะนัั, ะฐ ััะพะฝัะตะฝะด ะธ MCP ะธัะฟะพะปัะทััั ะธั ัะตัะตะท ะตะดะธะฝัะน `.pyz` ะฐััะตัะฐะบั. ะัะธ ะธะทะผะตะฝะตะฝะธัั ะธะฝัะตััะตะนัะพะฒ ะพะฑะฝะพะฒะปัะนัะต ัะพะพัะฒะตัััะฒัััะธะต ัะฐะทะดะตะปั API ะฒ ัะตะบััะตะผ ะดะพะบัะผะตะฝัะต.

---

## ๐ ะะพะฝะธัะพัะธะฝะณ ะธ ะปะพะณะธ

ะะฟะตัะฐัะธะพะฝะฝัะต ะบะพะผะฐะฝะดั ะดะปั ะฟัะพะฒะตัะบะธ ัะพััะพัะฝะธั ะบะพะฝัะตะนะฝะตัะฐ, ััะตะฝะธั ะปะพะณะพะฒ ะธ ะฝะฐะฑะปัะดะตะฝะธั ะทะฐ ัะตััััะฐะผะธ ัะพะฑัะฐะฝั ะฒ [ab-project-backend.md](ab-project-backend.md#๐-ะผะพะฝะธัะพัะธะฝะณ-ะธ-ะปะพะณะธ). ะะฐ ะฟัะพะตะบัะฝะพะผ ััะพะฒะฝะต ะฝะตะพะฑัะพะดะธะผะพ ะพะฑะตัะฟะตัะธะฒะฐัั ะดะพัััะฟ ะบ `docker stats`, `supervisorctl status` ะธ ะถััะฝะฐะปะฐะผ ะฟัะธะปะพะถะตะฝะธะน ะดะปั ะฑััััะพะน ะดะธะฐะณะฝะพััะธะบะธ ะธะฝัะธะดะตะฝัะพะฒ.

---

## ๐ ะะตะทะพะฟะฐัะฝะพััั

ะะบััะฐะปัะฝะฐั ะผะพะดะตะปั ะฑะตะทะพะฟะฐัะฝะพััะธ backend, ะดะตะนััะฒัััะธะต ะพะณัะฐะฝะธัะตะฝะธั ะธ ะฟะปะฐะฝ ะฟะพ ััะธะปะตะฝะธั ะทะฐัะธัั ะฟัะธะฒะตะดะตะฝั ะฒ [ab-project-backend.md](ab-project-backend.md#๐-ะฑะตะทะพะฟะฐัะฝะพััั). ะะฐะถะฝะพ: ัะตัะฒะธั ัะฐัััะธัะฐะฝ ะฝะฐ ะพะดะฝะพะณะพ ะฟะพะปัะทะพะฒะฐัะตะปั, ะฒะฝะตัะฝะธะต ะฟะพััั ะฝะต ะฟัะฑะปะธะบััััั, ะดะพัััะฟ ะพัััะตััะฒะปัะตััั ะธัะบะปััะธัะตะปัะฝะพ ัะตัะตะท SSH tunnel; ัะฐััะธัะตะฝะธะต ะผะพะดะตะปะธ (JWT, RBAC, HTTPS) ะทะฐะฟะปะฐะฝะธัะพะฒะฐะฝะพ ะดะปั ะฑัะดััะตะณะพ ะผัะปััะธะฟะพะปัะทะพะฒะฐัะตะปััะบะพะณะพ ัะตะถะธะผะฐ.

---

## ๐ ะะพะบัะผะตะฝัะฐัะธั

### ะัะฝะพะฒะฝะฐั ะดะพะบัะผะตะฝัะฐัะธั (aa-main-docs/)
- **aa-project.md** (ััะพั ะดะพะบัะผะตะฝั) โ ะะฑะทะพั ะฟัะพะตะบัะฐ
- [ab-project-backend.md](ab-project-backend.md) โ ะะฝัััะตะฝะฝัั ะดะพะบัะผะตะฝัะฐัะธั backend

### ะะตะทัะผะต ัะฐัะพะฒ (bb-chats/)
- [chat-25-1107-resume-16-37.md](../bb-chats/chat-25-1107-resume-16-37.md) โ ะกะพะทะดะฐะฝะธะต ะะ
- [chat-25-1108-resume-10-55.md](../bb-chats/chat-25-1108-resume-10-55.md) โ ะะฟัะตะดะตะปะตะฝะธะต ะฐััะธัะตะบัััั
- [chat-25-1108-resume-23-10.md](../bb-chats/chat-25-1108-resume-23-10.md) โ ะะฐัะบะฐั backend ะธ ะพะบััะถะตะฝะธะต

### ะัะตะดะฒะฐัะธัะตะปัะฝัะต ะผะฐัะตัะธะฐะปั (cc-preliminary/)
- [25-1107/multigraph-architecture-overview.md](../cc-preliminary/25-1107/multigraph-architecture-overview.md) โ ะะตัะฐะปะธ ะะ
- [25-1108/chat-session-architecture-design.md](../cc-preliminary/25-1108/chat-session-architecture-design.md) โ ะััะธัะตะบัััะฝะพะต ัะตัะตะฝะธะต

---

## ๐ Roadmap

### Milestone 1: MVP Backend (ะฒ ะฟัะพัะตััะต)
- [x] ะกัััะบัััะฐ ะฟัะพะตะบัะฐ mgsrc/
- [x] Flask app ั ะฑะฐะทะพะฒัะผ API (health endpoint)
- [ ] ะะพะดะบะปััะตะฝะธะต ะบ PostgreSQL
- [ ] Dockerfile + Supervisor
- [ ] ะกะบัะธะฟั build-pyz.sh
- [ ] ะะดะธะฝ working endpoint: POST /api/blocks

**ะกัะพะบ:** 1-2 ะฝะตะดะตะปะธ

### Milestone 2: MVP Frontend
- [ ] Vue 3 ะฟัะพะตะบั
- [ ] ะะฐะทะพะฒะฐั ะฒะธะทัะฐะปะธะทะฐัะธั ะณัะฐัะฐ (vis-network)
- [ ] ะะฝัะตะณัะฐัะธั ั backend API
- [ ] ะกะฑะพัะบะฐ ะฒ backend/static/

**ะกัะพะบ:** 1-2 ะฝะตะดะตะปะธ

### Milestone 3: MCP Integration
- [ ] MCP server ะฑะฐะทะพะฒัะน
- [ ] Handlers ะดะปั ะฑะปะพะบะพะฒ ะธ ะดะธะทะฐะนะฝะพะฒ
- [ ] WebSocket ะดะปั ะดะฒัััะพัะพะฝะฝะตะน ัะฒัะทะธ
- [ ] ะขะตััะธัะพะฒะฐะฝะธะต ะฒ Cursor AI

**ะกัะพะบ:** 1 ะฝะตะดะตะปั

### Milestone 4: ะะฐะทะฒะตัััะฒะฐะฝะธะต
- [ ] ะกะบัะธะฟัั deploy/update/rollback
- [ ] ะะฐะทะฒะตัััะฒะฐะฝะธะต ะฝะฐ fedoc-server
- [ ] Smoke tests
- [ ] ะะพะบัะผะตะฝัะฐัะธั

**ะกัะพะบ:** 1 ะฝะตะดะตะปั

### Future (ะฟะพัะปะต MVP)
- [ ] ะะผะฟะพัั ัััะตััะฒัััะธั ะดะฐะฝะฝัั ะธะท fedoc
- [ ] ะะฐััะธัะตะฝะฝะฐั ะฒะธะทัะฐะปะธะทะฐัะธั
- [ ] ะญะบัะฟะพัั ะฒ ัะฐะทะปะธัะฝัะต ัะพัะผะฐัั
- [ ] ะจะฐะฑะปะพะฝั ะธ ะฟะฐััะตัะฝั
- [ ] ะะตััะธะพะฝะธัะพะฒะฐะฝะธะต ะฑะปะพะบะพะฒ

---

## ๐ค ะะพะฝััะธะฑัััะธะฝะณ

**ะขะตะบััะธะน ััะฐััั:** ะัะพะตะบั ะฒ ััะฐะดะธะธ ัะฐะทัะฐะฑะพัะบะธ, ะพะดะธะฝะพัะฝัะน ัะฐะทัะฐะฑะพััะธะบ

**ะัะปะธ ะฟะพััะตะฑัะตััั:**
1. Fork ัะตะฟะพะทะธัะพัะธะน
2. ะกะพะทะดะฐัั feature branch
3. Commit ะธะทะผะตะฝะตะฝะธะน
4. Push ะฒ branch
5. ะกะพะทะดะฐัั Pull Request

---

## ๐ ะะธัะตะฝะทะธั

Apache License 2.0 (ะฐะฝะฐะปะพะณะธัะฝะพ ะพัะฝะพะฒะฝะพะผั ะฟัะพะตะบัั fedoc)

---

## ๐ ะะพะฝัะฐะบัั

**ะะฒัะพั:** ะะปะตะบัะฐะฝะดั  
**ะะตะฟะพะทะธัะพัะธะน:** https://github.com/bondalen/fedoc (ะฒะตัะบะฐ multigraph)  
**ะัะพะตะบั:** fedoc - ะฆะตะฝััะฐะปะธะทะพะฒะฐะฝะฝะฐั ัะธััะตะผะฐ ะฟัะฐะฒะธะป ะธ ะดะพะบัะผะตะฝัะฐัะธะธ

---

## โ ะขะตััะธัะพะฒะฐะฝะธะต ะธ CI

### ะะพะบะฐะปัะฝัะต ะฟัะพะฒะตัะบะธ
- `pytest -m integration` โ ะพัะฝะพะฒะฝะพะน ะฟัะพะณะพะฝ, ััะตะฑัะตั ะดะพัััะฟะฝะพะน PostgreSQL/AGE ะธ ะฟะตัะตะผะตะฝะฝะพะน `FEDOC_DATABASE_URL`.
- `python -m fedoc_multigraph.scripts.seed_multigraph --force` โ ะฟัะธะฒะพะดะธั ะะ ะบ ะธะทะฒะตััะฝะพะผั ัะพััะพัะฝะธั (ะฑะปะพะบะธ, ะดะธะทะฐะนะฝั, ะดะตะผะพะฝัััะฐัะธะพะฝะฝัะน ะฟัะพะตะบั ั ัะตะฑัะพะผ).
- ะะฐ 2025-11-09 ะฟัะพัะพะดะธั 16 ะธะฝัะตะณัะฐัะธะพะฝะฝัั ัะตััะพะฒ, ะฒะบะปััะฐั ะฝะตะณะฐัะธะฒะฝัะต ััะตะฝะฐัะธะธ ะดะปั `/api/projects`.

### GitHub Actions
- Workflow `.github/workflows/integration-tests.yml` ะทะฐะฟััะบะฐะตััั ะฝะฐ `push`/`pull_request` ะฒ `main`.
- ะจะฐะณะธ:
  1. ะะฐะทะฒััััะฒะฐะฝะธะต `apache/age:latest` ั ะะ `fedoc`.
  2. ะะฝะธัะธะฐะปะธะทะฐัะธั AGE: `CREATE EXTENSION`, `create_graph`, `create_vlabel`, ัะฐะฑะปะธัะฐ `mg.design_to_block`.
  3. ะฃััะฐะฝะพะฒะบะฐ ะทะฐะฒะธัะธะผะพััะตะน ะธ ะทะฐะฟััะบ `pytest -m integration` ั `FEDOC_DATABASE_URL` ะธะท ัะตะบัะตัะพะฒ.

### ะะพะบัััะธะต
- `/api/blocks` โ CRUD + ะฝะตะณะฐัะธะฒะฝัะต (`404`, `422`).
- `/api/designs` โ CRUD, ัะฒัะทะธ `block_id`, ะฝะตะณะฐัะธะฒะฝัะต (`404`, `409`, `422`).
- `/api/projects` โ CRUD, ัะฟัะฐะฒะปะตะฝะธะต `design_edge_to_project`, ะณัะฐั (`designs`, `edges`, `blocks`), ัััะพะนัะธะฒะพััั ะบ ัะดะฐะปัะฝะฝัะผ ััะฑัะฐะผ.
- **ะะตัะฐะปะธ:** ัะผ. ัะฐััะธัะตะฝะฝัะน ะพัััั [cc-preliminary/25-1109/testing-ci-deep-dive.md](../cc-preliminary/25-1109/testing-ci-deep-dive.md).
- **Pre-PR ัะตะบ-ะปะธัั ะธ ะพัะปะฐะดะบะฐ:** ัะฐะทะดะตะป 2.6โ2.7 ะฒ [testing-ci-deep-dive.md](../cc-preliminary/25-1109/testing-ci-deep-dive.md) ะพะฟะธััะฒะฐะตั ะพะฑัะทะฐัะตะปัะฝัะต ัะฐะณะธ ะฟะตัะตะด PR ะธ ะบะพะผะฐะฝะดั ะดะปั ะฐะฝะฐะปะธะทะฐ ะปะพะณะพะฒ.

**ะะพัะปะตะดะฝะตะต ะพะฑะฝะพะฒะปะตะฝะธะต:** 2025-11-09  
**ะะตััะธั ะดะพะบัะผะตะฝัะฐ:** 1.0.0

