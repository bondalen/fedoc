# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ä—ë–±–µ—Ä –≥—Ä–∞—Ñ–∞

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 17.10.2025  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

---

## üìã –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ä—ë–±–µ—Ä –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö —Å–≤—è–∑–µ–π –≤ –≥—Ä–∞—Ñ–µ –ø—Ä–æ–µ–∫—Ç–æ–≤. –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç **–≤ –æ–±–æ–∏—Ö –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è—Ö**: –µ—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Å–≤—è–∑—å A‚ÜíB, —Ç–æ –ø–æ–ø—ã—Ç–∫–∞ —Å–æ–∑–¥–∞—Ç—å A‚ÜíB –∏–ª–∏ B‚ÜíA –±—É–¥–µ—Ç –æ—Ç–∫–ª–æ–Ω–µ–Ω–∞.

### –ü–æ—á–µ–º—É –Ω–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã ArangoDB?

- **ArangoDB Community Edition –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ç—Ä–∏–≥–≥–µ—Ä—ã** (—Ç–æ–ª—å–∫–æ Enterprise)
- **–†–µ—à–µ–Ω–∏–µ:** –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (Python)
- **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:** –†–∞–±–æ—Ç–∞–µ—Ç –≤ –ª—é–±–æ–π –≤–µ—Ä—Å–∏–∏ ArangoDB, –≥–∏–±–∫–∞—è –ª–æ–≥–∏–∫–∞, –ø–æ–¥—Ä–æ–±–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ        Frontend (Graph Viewer)          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚îÇ HTTP REST API
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         API Server (Flask)               ‚îÇ
‚îÇ  ‚Ä¢ POST /api/edges                       ‚îÇ
‚îÇ  ‚Ä¢ PUT /api/edges/<id>                   ‚îÇ
‚îÇ  ‚Ä¢ DELETE /api/edges/<id>                ‚îÇ
‚îÇ  ‚Ä¢ POST /api/edges/check                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ      Edge Validator (Python)             ‚îÇ
‚îÇ  ‚Ä¢ check_edge_uniqueness()               ‚îÇ
‚îÇ  ‚Ä¢ insert_edge_safely()                  ‚îÇ
‚îÇ  ‚Ä¢ update_edge_safely()                  ‚îÇ
‚îÇ  ‚Ä¢ delete_edge()                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚îÇ AQL Queries
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ          ArangoDB (fedoc)                ‚îÇ
‚îÇ  ‚Ä¢ canonical_nodes (–≤–µ—Ä—à–∏–Ω—ã)             ‚îÇ
‚îÇ  ‚Ä¢ project_relations (—Ä—ë–±—Ä–∞)             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –§–∞–π–ª—ã

| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| `src/lib/graph_viewer/backend/edge_validator.py` | –ú–æ–¥—É–ª—å –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ä—ë–±–µ—Ä |
| `src/lib/graph_viewer/backend/api_server.py` | REST API endpoints |
| `src/mcp_server/handlers/edge_manager.py` | MCP handler –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–æ —Å–≤—è–∑—è–º–∏ |
| `src/mcp_server/server.py` | MCP –∫–æ–º–∞–Ω–¥—ã (add_edge, update_edge, delete_edge, check_edge_uniqueness) |

---

## üîß API Reference

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏

**Endpoint:** `POST /api/edges/check`

**Request:**
```json
{
  "_from": "canonical_nodes/c:backend",
  "_to": "canonical_nodes/t:java@21",
  "exclude_edge_id": "project_relations/12345"  // optional
}
```

**Response (—É–Ω–∏–∫–∞–ª—å–Ω–∞):**
```json
{
  "is_unique": true,
  "error": null
}
```

**Response (–Ω–µ —É–Ω–∏–∫–∞–ª—å–Ω–∞):**
```json
{
  "is_unique": false,
  "error": "–°–≤—è–∑—å –º–µ–∂–¥—É —É–∑–ª–∞–º–∏ 'c:backend' –∏ 't:java@21' —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç (–ø—Ä—è–º–∞—è —Å–≤—è–∑—å: c:backend ‚Üí t:java@21, ID: project_relations/85295)"
}
```

---

### 2. –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–±—Ä–∞

**Endpoint:** `POST /api/edges`

**Request:**
```json
{
  "_from": "canonical_nodes/c:backend",
  "_to": "canonical_nodes/t:java@21",
  "relationType": "uses",
  "projects": ["fepro", "femsq"]
}
```

**Response (—É—Å–ø–µ—Ö):**
```json
{
  "success": true,
  "edge": {
    "_id": "project_relations/245476",
    "_key": "245476",
    "_rev": "_kdLvvvS---"
  }
}
```

**Response (–¥—É–±–ª–∏–∫–∞—Ç):**
```json
{
  "success": false,
  "error": "–°–≤—è–∑—å –º–µ–∂–¥—É —É–∑–ª–∞–º–∏ 'c:backend' –∏ 't:java@21' —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç (–ø—Ä—è–º–∞—è —Å–≤—è–∑—å: c:backend ‚Üí t:java@21, ID: project_relations/85295)"
}
```

**HTTP –∫–æ–¥—ã:**
- `200` - —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–æ
- `409` - –∫–æ–Ω—Ñ–ª–∏–∫—Ç (–¥—É–±–ª–∏–∫–∞—Ç)
- `400` - –Ω–µ–≤–µ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å
- `500` - –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

---

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–±—Ä–∞

**Endpoint:** `PUT /api/edges/<path:edge_id>`

**Request:**
```json
{
  "_from": "canonical_nodes/c:backend",  // optional
  "_to": "canonical_nodes/t:java@21",     // optional
  "relationType": "depends_on",           // optional
  "projects": ["fepro"]                    // optional
}
```

**Response:**
```json
{
  "success": true,
  "edge": {
    "_id": "project_relations/245476",
    "_key": "245476",
    "_rev": "_kdLvvvS--A"
  }
}
```

**‚ö†Ô∏è –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ `_from` –∏–ª–∏ `_to` —Ç–∞–∫–∂–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –Ω–æ–≤–æ–π —Å–≤—è–∑–∏.

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ 17.10.2025)

---

### 4. –£–¥–∞–ª–µ–Ω–∏–µ —Ä–µ–±—Ä–∞

**Endpoint:** `DELETE /api/edges/<path:edge_id>`

**Response:**
```json
{
  "success": true,
  "message": "–†–µ–±—Ä–æ project_relations/245476 —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω–æ"
}
```

**HTTP –∫–æ–¥—ã:**
- `200` - —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω–æ
- `404` - —Ä–µ–±—Ä–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
- `500` - –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

---

## üéØ MCP –ö–æ–º–∞–Ω–¥—ã

### –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `add_edge` | –î–æ–±–∞–≤–∏—Ç—å —Ä–µ–±—Ä–æ —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π |
| `update_edge` | –û–±–Ω–æ–≤–∏—Ç—å —Ä–µ–±—Ä–æ |
| `delete_edge` | –£–¥–∞–ª–∏—Ç—å —Ä–µ–±—Ä–æ |
| `check_edge_uniqueness` | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å |

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏
```python
check_edge_uniqueness(
    from_node="canonical_nodes/c:backend",
    to_node="canonical_nodes/t:java@21"
)
```

#### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–±—Ä–∞
```python
add_edge(
    from_node="canonical_nodes/c:backend",
    to_node="canonical_nodes/t:java@21",
    relation_type="uses",
    projects=["fepro", "femsq"]
)
```

#### –£–¥–∞–ª–µ–Ω–∏–µ —Ä–µ–±—Ä–∞
```python
delete_edge(
    edge_id="project_relations/245476"
)
```

**‚ö†Ô∏è –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** MCP –∫–æ–º–∞–Ω–¥—ã —Ç—Ä–µ–±—É—é—Ç –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ Cursor/MCP —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ –∫–æ–¥–∞.

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
# –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π —Ç–µ—Å—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏
bash /tmp/test_edge_validation.sh
```

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤ (17.10.2025)

| –¢–µ—Å—Ç | –†–µ–∑—É–ª—å—Ç–∞—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----------|----------|
| ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ | PASSED | –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å–≤—è–∑–∏ |
| ‚úÖ –ü—Ä—è–º–æ–π –¥—É–±–ª–∏–∫–∞—Ç (A‚ÜíB + A‚ÜíB) | PASSED | –û—Ç–∫–ª–æ–Ω—è–µ—Ç—Å—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º |
| ‚úÖ –û–±—Ä–∞—Ç–Ω—ã–π –¥—É–±–ª–∏–∫–∞—Ç (A‚ÜíB + B‚ÜíA) | PASSED | **–û—Ç–∫–ª–æ–Ω—è–µ—Ç—Å—è —Å —É–∫–∞–∑–∞–Ω–∏–µ–º "–æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å"** |
| ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ —É–Ω–∏–∫–∞–ª—å–Ω–æ–π —Å–≤—è–∑–∏ | PASSED | –£—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–µ—Ç—Å—è |
| ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ —Ä–µ–±—Ä–∞ | PASSED | –£—Å–ø–µ—à–Ω–æ —É–¥–∞–ª—è–µ—Ç—Å—è |
| ‚úÖ **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–±—Ä–∞** | **PASSED** | **–†–∞–±–æ—Ç–∞–µ—Ç —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π** |

---

## üîç –õ–æ–≥–∏–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

### –ê–ª–≥–æ—Ä–∏—Ç–º –ø—Ä–æ–≤–µ—Ä–∫–∏ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏

```python
def check_edge_uniqueness(from_node, to_node, exclude_edge_id=None):
    """
    –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —Å–≤—è–∑–∏ –≤ –û–ë–û–ò–• –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è—Ö
    
    –ó–∞–ø—Ä–æ—Å AQL:
    FOR e IN project_relations
        FILTER (e._from == @from AND e._to == @to) 
            OR (e._from == @to AND e._to == @from)
        [FILTER e._id != @exclude_id]  // –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏
        LIMIT 1
        RETURN e
    """
    # –ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω–∞ —Ö–æ—Ç—è –±—ã –æ–¥–Ω–∞ —Å–≤—è–∑—å - –Ω–µ —É–Ω–∏–∫–∞–ª—å–Ω–∞
    # –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –ø—Ä—è–º–∞—è –∏–ª–∏ –æ–±—Ä–∞—Ç–Ω–∞—è
    # –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –ø–æ–¥—Ä–æ–±–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
```

### –ü—Ä–∏–º–µ—Ä—ã

**–°–ª—É—á–∞–π 1: –ü—Ä—è–º–æ–π –¥—É–±–ª–∏–∫–∞—Ç**
```
–°—É—â–µ—Å—Ç–≤—É–µ—Ç: A ‚Üí B (ID: 123)
–ü–æ–ø—ã—Ç–∫–∞:    A ‚Üí B
–†–µ–∑—É–ª—å—Ç–∞—Ç:  ‚ùå "–°–≤—è–∑—å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç (–ø—Ä—è–º–∞—è —Å–≤—è–∑—å: A ‚Üí B, ID: 123)"
```

**–°–ª—É—á–∞–π 2: –û–±—Ä–∞—Ç–Ω—ã–π –¥—É–±–ª–∏–∫–∞—Ç**
```
–°—É—â–µ—Å—Ç–≤—É–µ—Ç: A ‚Üí B (ID: 123)
–ü–æ–ø—ã—Ç–∫–∞:    B ‚Üí A
–†–µ–∑—É–ª—å—Ç–∞—Ç:  ‚ùå "–°–≤—è–∑—å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç (–æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å: B ‚Üí A, ID: 123)"
```

**–°–ª—É—á–∞–π 3: –£–Ω–∏–∫–∞–ª—å–Ω–∞—è —Å–≤—è–∑—å**
```
–°—É—â–µ—Å—Ç–≤—É–µ—Ç: A ‚Üí B
–ü–æ–ø—ã—Ç–∫–∞:    A ‚Üí C
–†–µ–∑—É–ª—å—Ç–∞—Ç:  ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ
```

---

## üìä –°—Ç–∞—Ç—É—Å —Ñ—É–Ω–∫—Ü–∏–π

| –§—É–Ω–∫—Ü–∏—è | –°—Ç–∞—Ç—É—Å | –ü—Ä–∏–º–µ—á–∞–Ω–∏—è |
|---------|--------|------------|
| `check_edge_uniqueness()` | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –æ–±–æ–∏—Ö –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è—Ö |
| `insert_edge_safely()` | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏ –≤—Å—Ç–∞–≤–∫–µ |
| `delete_edge()` | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ ID |
| `update_edge_safely()` | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ |

### –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. ~~‚ö†Ô∏è **UPDATE endpoint**~~ - ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û** (17.10.2025)
   - ~~**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ `collection.update()`~~
   - **–†–µ—à–µ–Ω–∏–µ:** –ü–µ—Ä–µ–¥–∞—á–∞ —Å–ª–æ–≤–∞—Ä—è `{'_key': key}` –≤–º–µ—Å—Ç–æ —Å—Ç—Ä–æ–∫–∏
   - **–°—Ç–∞—Ç—É—Å:** –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç

2. ‚ö†Ô∏è **MCP –∫–æ–º–∞–Ω–¥—ã** - –¢—Ä–µ–±—É—é—Ç –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞
   - **–ü—Ä–∏—á–∏–Ω–∞:** Cursor –∫—ç—à–∏—Ä—É–µ—Ç MCP —Å–µ—Ä–≤–µ—Ä
   - **Workaround:** –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Cursor
   - **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ù–∏–∑–∫–∏–π

---

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### 1. –ó–∞–ø—É—Å–∫ Graph Viewer —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π

```bash
# –ß–µ—Ä–µ–∑ MCP –∫–æ–º–∞–Ω–¥—É
mcp_fedoc_open_graph_viewer()

# –ò–ª–∏ –≤—Ä—É—á–Ω—É—é
cd /home/alex/fedoc
source venv/bin/activate
python3 src/lib/graph_viewer/backend/api_server.py \
    --db-password 'aR@ng0Pr0d2025xK9mN8pL'
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

```bash
# –¢–µ—Å—Ç API
curl -X POST http://localhost:8899/api/edges/check \
  -H "Content-Type: application/json" \
  -d '{"_from":"canonical_nodes/c:backend","_to":"canonical_nodes/t:java@21"}'
```

### 3. –õ–æ–≥–∏

```bash
# API —Å–µ—Ä–≤–µ—Ä
tail -f /tmp/graph_viewer_api.log
```

---

## üìù –î–∞–ª—å–Ω–µ–π—à–µ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ

### –ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

1. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å UPDATE endpoint** - —É—Å—Ç—Ä–∞–Ω–∏—Ç—å –±–∞–≥ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
2. **–î–æ–±–∞–≤–∏—Ç—å –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** - –∫–Ω–æ–ø–∫–∏ —Å–æ–∑–¥–∞–Ω–∏—è/—É–¥–∞–ª–µ–Ω–∏—è —Å–≤—è–∑–µ–π –≤ Graph Viewer
3. **–†–∞—Å—à–∏—Ä–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ —Å–≤—è–∑–µ–π, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
4. **–î–æ–±–∞–≤–∏—Ç—å –∞—É–¥–∏—Ç** - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å–æ —Å–≤—è–∑—è–º–∏
5. **Batch –æ–ø–µ—Ä–∞—Ü–∏–∏** - –º–∞—Å—Å–æ–≤–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ —Å–≤—è–∑–µ–π

### –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

- –î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é –≤ Graph Viewer –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–æ —Å–≤—è–∑—è–º–∏
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å drag-and-drop –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–≤—è–∑–µ–π –º–µ–∂–¥—É —É–∑–ª–∞–º–∏
- –î–æ–±–∞–≤–∏—Ç—å –≤–∏–∑—É–∞–ª—å–Ω—É—é –∏–Ω–¥–∏–∫–∞—Ü–∏—é –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö —Å–≤—è–∑–µ–π
- –°–æ–∑–¥–∞—Ç—å –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–≤—è–∑—è–º–∏ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏

---

## üìö –°–≤—è–∑–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- `docs-preliminary/chats/chat-2025-01-15-graph-structure-optimization.md` - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –≥—Ä–∞—Ñ–∞
- `docs-preliminary/project-history/chat-2025-10-17_trigger_arango.md` - –ò—Å—Ç–æ—Ä–∏—è —Ä–∞–±–æ—Ç—ã –Ω–∞–¥ —Ç—Ä–∏–≥–≥–µ—Ä–∞–º–∏
- `docs/project-documentation-rules.md` - –ü—Ä–∞–≤–∏–ª–∞ –ø—Ä–æ–µ–∫—Ç–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

---

## ‚úÖ –ò—Ç–æ–≥–∏

### –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏** - —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –æ–±–æ–∏—Ö –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è—Ö (A‚ÜíB –∏ B‚ÜíA)  
‚úÖ **REST API** - 4 endpoint'–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–æ —Å–≤—è–∑—è–º–∏  
‚úÖ **MCP –∫–æ–º–∞–Ω–¥—ã** - 4 –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Cursor  
‚úÖ **–ü–æ–¥—Ä–æ–±–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è** - —É–∫–∞–∑—ã–≤–∞—é—Ç —Ç–∏–ø –∏ ID –¥—É–±–ª–∏—Ä—É—é—â–µ–π —Å–≤—è–∑–∏  
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞—â–∏—Ç–∞** - –æ—Ç–∫–ª–æ–Ω—è–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è  

### –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ì–û–¢–û–í–û –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ**

–°–∏—Å—Ç–µ–º–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞ –∏ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö —Å–≤—è–∑–µ–π –≤ –≥—Ä–∞—Ñ–µ –ø—Ä–æ–µ–∫—Ç–æ–≤.

---

**–ê–≤—Ç–æ—Ä:** Claude (Cursor AI)  
**–î–∞—Ç–∞:** 17 –æ–∫—Ç—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞:** 1.0

