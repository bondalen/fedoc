# –û—Ç—á–µ—Ç –æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –≠—Ç–∞–ø–∞ 3: MCP Handler –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–æ–µ–∫—Ç–∞–º–∏ —Ä—ë–±–µ—Ä

**–î–∞—Ç–∞:** 2025-11-03  
**–ó–∞–¥–∞—á–∞:** –°–æ–∑–¥–∞–Ω–∏–µ MCP Handler –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–æ–≤—ã–º–∏ API endpoints  
**–§–∞–π–ª:** `src/mcp_server/handlers/edge_project_manager.py`

---

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### –ö–ª–∞—Å—Å `EdgeProjectManagerHandler`

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω handler —Å 7 –º–µ—Ç–æ–¥–∞–º–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–æ–µ–∫—Ç–∞–º–∏ —Ä—ë–±–µ—Ä —á–µ—Ä–µ–∑ API:

#### 1. `get_projects(edge_id)` ‚úÖ
- **–ú–µ—Ç–æ–¥ API:** `GET /api/edges/<edge_id>/projects`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–µ–∫—Ç–æ–≤ –¥–ª—è —Ä–µ–±—Ä–∞
- **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ:** ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç

#### 2. `add_project(edge_id, project_key, ...)` ‚úÖ
- **–ú–µ—Ç–æ–¥ API:** `POST /api/edges/<edge_id>/projects`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–µ–∫—Ç –∫ —Ä–µ–±—Ä—É
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** `role`, `weight`, `created_by`, `metadata` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ)

#### 3. `remove_project(edge_id, project_key)` ‚úÖ
- **–ú–µ—Ç–æ–¥ API:** `DELETE /api/edges/<edge_id>/projects/<project_key>`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –£–¥–∞–ª–∏—Ç—å –ø—Ä–æ–µ–∫—Ç –∏–∑ —Ä–µ–±—Ä–∞

#### 4. `get_edge_info(edge_id)` ‚úÖ
- **–ú–µ—Ç–æ–¥ API:** `GET /api/edges/<edge_id>`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ä–µ–±—Ä–µ
- **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ:** ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç

#### 5. `check_connection(from_node, to_node, project_filter)` ‚úÖ
- **–ú–µ—Ç–æ–¥ API:** `POST /api/edges/check-connection`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ —Å–≤—è–∑–∏ –º–µ–∂–¥—É —É–∑–ª–∞–º–∏
- **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ:** ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç

#### 6. `batch_add_projects(edge_ids, project_key, ...)` ‚úÖ
- **–ú–µ—Ç–æ–¥ API:** `POST /api/edges/batch-add-projects`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ú–∞—Å—Å–æ–≤–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –∫ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º —Ä—ë–±—Ä–∞–º
- **–¢–∞–π–º–∞—É—Ç:** 30 —Å–µ–∫—É–Ω–¥ (–¥–ª—è –±–æ–ª—å—à–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π)

#### 7. `batch_remove_projects(edge_ids, project_key)` ‚úÖ
- **–ú–µ—Ç–æ–¥ API:** `POST /api/edges/batch-remove-projects`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ú–∞—Å—Å–æ–≤–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ä—ë–±–µ—Ä
- **–¢–∞–π–º–∞—É—Ç:** 30 —Å–µ–∫—É–Ω–¥ (–¥–ª—è –±–æ–ª—å—à–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π)

### Factory —Ñ—É–Ω–∫—Ü–∏—è

**`create_edge_project_manager_handler(api_url)`**
- –°–æ–∑–¥–∞—ë—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä handler'–∞
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `http://localhost:15000`
- –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ `create_edge_manager_handler`

---

## ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤:**
- ‚úÖ `get_projects()` - —É—Å–ø–µ—à–Ω–æ –ø–æ–ª—É—á–µ–Ω—ã –ø—Ä–æ–µ–∫—Ç—ã
- ‚úÖ `get_edge_info()` - —É—Å–ø–µ—à–Ω–æ –ø–æ–ª—É—á–µ–Ω–∞ –ø–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- ‚úÖ `check_connection()` - —É—Å–ø–µ—à–Ω–æ –Ω–∞–π–¥–µ–Ω–∞ —Å–≤—è–∑—å

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í—Å–µ –º–µ—Ç–æ–¥—ã handler'–∞ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## üìä –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
EdgeProjectManagerHandler
    ‚Üì
HTTP requests
    ‚Üì
API Server (localhost:15000)
    ‚Üì
PostgreSQL —Ñ—É–Ω–∫—Ü–∏–∏
    ‚Üì
edge_projects —Ç–∞–±–ª–∏—Ü–∞
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –¥–æ—Å—Ç—É–ø–∞ —á–µ—Ä–µ–∑ API
- ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º `EdgeManagerHandler`
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ —Ç–∞–π–º–∞—É—Ç–æ–≤
- ‚úÖ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ MCP –∫–æ–º–∞–Ω–¥–∞—Ö

---

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ **–≠—Ç–∞–ø 1** - API endpoints –¥–ª—è –æ–¥–∏–Ω–æ—á–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
2. ‚úÖ **–≠—Ç–∞–ø 2** - API endpoints –¥–ª—è –º–∞—Å—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
3. ‚úÖ **–≠—Ç–∞–ø 3** - MCP Handler –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å endpoints
4. ‚è≠Ô∏è **–≠—Ç–∞–ø 4** - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è MCP –∫–æ–º–∞–Ω–¥ –≤ server.py

---

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–≠—Ç–∞–ø 3 —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à—ë–Ω!** MCP Handler —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω, –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é. –í—Å–µ –º–µ—Ç–æ–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç —á–µ—Ä–µ–∑ –µ–¥–∏–Ω—É—é —Ç–æ—á–∫—É –¥–æ—Å—Ç—É–ø–∞ (API) –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç —É–¥–æ–±–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–æ–µ–∫—Ç–∞–º–∏ —Ä—ë–±–µ—Ä.

