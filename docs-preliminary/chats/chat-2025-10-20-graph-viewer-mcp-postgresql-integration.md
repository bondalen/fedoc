# Chat 2025-10-20: Graph Viewer MCP Integration —Å PostgreSQL

**–î–∞—Ç–∞:** 2025-10-20  
**–£—á–∞—Å—Ç–Ω–∏–∫–∏:** –ê–ª–µ–∫—Å–∞–Ω–¥—Ä, AI Assistant  
**–ú–∞—à–∏–Ω–∞:** alex-User-PC (Windows WSL2 Ubuntu 24.04)  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ

---

## üéØ –¶–µ–ª—å —Å–µ—Å—Å–∏–∏

–û–±–µ—Å–ø–µ—á–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –∑–∞–ø—É—Å–∫ Graph Viewer —á–µ—Ä–µ–∑ MCP –∫–æ–º–∞–Ω–¥—É `open_graph_viewer` –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –º–∞—à–∏–Ω–∞—Ö —Å –ø–æ–ª–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π PostgreSQL + Apache AGE –≤–º–µ—Å—Ç–æ ArangoDB.

---

## üìã –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### –≠—Ç–∞–ø 1: –ü–æ–¥—Ç—è–≥–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å GitHub ‚úÖ

**–ö–æ–º–∞–Ω–¥–∞:**
```bash
git pull origin feature/migrate-to-postgresql-age
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ 22 —Ñ–∞–π–ª–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–æ (2061 –¥–æ–±–∞–≤–ª–µ–Ω–∏–π, 251 —É–¥–∞–ª–µ–Ω–∏–µ)
- ‚úÖ –ü–æ–ª—É—á–µ–Ω—ã PostgreSQL —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è Graph Viewer
- ‚úÖ –ü–æ–ª—É—á–µ–Ω—ã —Å–∫—Ä–∏–ø—Ç—ã –º–∏–≥—Ä–∞—Ü–∏–∏
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- –ù–æ–≤—ã–µ SQL —Å–∫—Ä–∏–ø—Ç—ã: `06-graph-viewer-functions.sql`, `07-edge-functions.sql`, `08-documents-tables.sql`
- –û–±–Ω–æ–≤–ª–µ–Ω API —Å–µ—Ä–≤–µ—Ä: `api_server_age.py`
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏ PostgreSQL

---

### –≠—Ç–∞–ø 2: –ò–∑—É—á–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ ‚úÖ

**–ü—Ä–æ—á–∏—Ç–∞–Ω—ã –¥–æ–∫—É–º–µ–Ω—Ç—ã:**
1. `README.md` - –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
2. `chat-2025-10-20-graph-viewer-postgresql-functions-integration.md` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è PostgreSQL —Ñ—É–Ω–∫—Ü–∏–π
3. `chat-2025-01-19_postgres_functions_optimization.md` - —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ Apache AGE
4. `postgres-cypher-parameters-solution.md` - —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ FORMAT()
5. `ARANGO_LEGACY_READONLY_ACCESS.md` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–∏–≥—Ä–∞—Ü–∏–∏
6. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –∏ –ø—Ä–æ—Ñ–∏–ª–∏ –º–∞—à–∏–Ω

**–ö–ª—é—á–µ–≤—ã–µ –≤—ã–≤–æ–¥—ã:**
- ‚úÖ –ü—Ä–æ–µ–∫—Ç –º–∏–≥—Ä–∏—Ä–æ–≤–∞–ª —Å ArangoDB –Ω–∞ PostgreSQL + Apache AGE
- ‚úÖ Apache AGE 1.6.0 –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã - —Ä–µ—à–µ–Ω–∏–µ —á–µ—Ä–µ–∑ FORMAT()
- ‚úÖ Graph Viewer –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ PostgreSQL —Ñ—É–Ω–∫—Ü–∏–∏
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ—Ñ–∏–ª–µ–π –º–∞—à–∏–Ω –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

---

### –≠—Ç–∞–ø 3: –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ Graph Viewer ‚úÖ

**–ü—Ä–æ–±–ª–µ–º–∞:**
- SSH —Ç—É–Ω–Ω–µ–ª—å —Ç–æ–ª—å–∫–æ –¥–ª—è ArangoDB (8529)
- PostgreSQL —Ç—É–Ω–Ω–µ–ª—å –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª (15432)

**–†–µ—à–µ–Ω–∏–µ:**
```bash
ssh -f -N -L 15432:localhost:5432 fedoc-server
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ API —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏–ª—Å—è –∏ –ø–æ–¥–∫–ª—é—á–∏–ª—Å—è –∫ PostgreSQL
- ‚úÖ Vite —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏–ª—Å—è
- ‚úÖ –ì—Ä–∞—Ñ –∑–∞–≥—Ä—É–∑–∏–ª—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ (39 —É–∑–ª–æ–≤)

**–û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**
- Vite proxy –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –ø–æ—Ä—Ç 8899 –≤–º–µ—Å—Ç–æ 15000
- WebSocket –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ 8899 –≤–º–µ—Å—Ç–æ proxy
- MCP –∫–æ–º–∞–Ω–¥–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

---

### –≠—Ç–∞–ø 4: –ê–Ω–∞–ª–∏–∑ –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º ‚úÖ

**–°–æ–∑–¥–∞–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç:** `graph-viewer-fixes-proposal.md`

**–û–±–Ω–∞—Ä—É–∂–µ–Ω–æ 6 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º:**

1. **SSH —Ç—É–Ω–Ω–µ–ª—å —Ç–æ–ª—å–∫–æ –¥–ª—è ArangoDB** (—É—Å—Ç–∞—Ä–µ–≤—à–∏–π)
   - –ù—É–∂–µ–Ω —Ç—É–Ω–Ω–µ–ª—å –¥–ª—è PostgreSQL (15432)

2. **–•–∞—Ä–¥–∫–æ–¥ –ø–æ—Ä—Ç–æ–≤ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**
   - –ü–æ—Ä—Ç API: 8899 (—É—Å—Ç–∞—Ä–µ–ª) ‚Üí 15000
   - –ù–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫ PostgreSQL

3. **ProcessManager –∏—â–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç**
   - –ò—â–µ—Ç: `api_server.py`
   - –ù—É–∂–Ω–æ: `api_server_age.py`

4. **Vite –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø–æ—Ä—Ç–∞–º–∏**
   - Proxy: 8899 ‚Üí –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å 15000

5. **WebSocket —Å —Ö–∞—Ä–¥–∫–æ–¥ –ø–æ—Ä—Ç–æ–º**
   - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ 8899 –Ω–∞–ø—Ä—è–º—É—é

6. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è PostgreSQL**
   - –ù–µ—Ç —Å–µ–∫—Ü–∏–∏ `postgres` –≤ config

**–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã–π –ø–ª–∞–Ω:** 14 —à–∞–≥–æ–≤ –≤ 6 —Ñ–∞–∑–∞—Ö

---

### –≠—Ç–∞–ø 5: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π ‚úÖ

#### –§–∞–∑–∞ 1: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

**5.1. –û–±–Ω–æ–≤–ª—ë–Ω `config/graph_viewer.yaml`:**
```yaml
version: "2.0"  # –û–±–Ω–æ–≤–ª–µ–Ω–∞ –≤–µ—Ä—Å–∏—è

ports:
  postgres_tunnel: 15432    # –ù–æ–≤—ã–π
  arango_tunnel: 8529       # Legacy
  api_server: 15000         # –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ —Å 8899
  vite_server: 5173

postgres:  # –ù–æ–≤–∞—è —Å–µ–∫—Ü–∏—è
  enabled: true
  port: 5432
  database: "fedoc"
  user: "postgres"
  default_password: "fedoc_test_2025"

arango:
  enabled: false  # –û—Ç–∫–ª—é—á–µ–Ω–æ –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏
```

**5.2. –°–æ–∑–¥–∞–Ω –ø—Ä–æ—Ñ–∏–ª—å WSL:**
```yaml
# config/machines/alex-User-PC.yaml
machine:
  os: "WSL2"
  distribution: "Ubuntu 24.04"

environment:
  browser_command: "cd /mnt/c && cmd.exe /c start"  # –î–ª—è WSL
```

#### –§–∞–∑–∞ 2: TunnelManager

**5.3. –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ç—É–Ω–Ω–µ–ª–µ–π:**

**–ù–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
```python
self.tunnels = {
    'postgres': {
        'local_port': 15432,
        'remote_port': 5432,
        'name': 'PostgreSQL',
        'status': 'connected'
    },
    'arango': {  # –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
        'local_port': 8529,
        'remote_port': 8529,
        'name': 'ArangoDB'
    }
}
```

**–ù–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã:**
- `ensure_all_tunnels()` - —Å–æ–∑–¥–∞—Ç—å –≤—Å–µ —Ç—É–Ω–Ω–µ–ª–∏ –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞
- `get_status()` - —Å—Ç–∞—Ç—É—Å –≤—Å–µ—Ö —Ç—É–Ω–Ω–µ–ª–µ–π (–Ω–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç)
- `close_all_tunnels()` - –∑–∞–∫—Ä—ã—Ç—å –≤—Å–µ

**–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:**
- ‚úÖ –°—Ç–∞—Ä—ã–µ –º–µ—Ç–æ–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç —Å –ø–µ—Ä–≤—ã–º —Ç—É–Ω–Ω–µ–ª–µ–º

#### –§–∞–∑–∞ 3: ProcessManager

**5.4. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –ø–æ–∏—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–∞:**
```python
# –ë—ã–ª–æ:
return self._find_process(r"python.*api_server\.py")

# –°—Ç–∞–ª–æ:
return self._find_process(r"python.*api_server_age\.py")
```

**5.5. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø–æ—Ä—Ç—ã:**
```python
self.api_port = config.get('ports.api_server', 15000)  # –±—ã–ª–æ 8899
```

**5.6. –ü–∞—Ä–∞–º–µ—Ç—Ä—ã PostgreSQL –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:**
```python
subprocess.Popen([
    str(self.venv_python),
    str(api_script),
    "--port", str(self.api_port),  # 15000
    "--db-host", config.get('postgres.host'),
    "--db-port", str(config.get('ports.postgres_tunnel')),  # 15432
    "--db-name", config.get('postgres.database'),
    "--db-user", config.get('postgres.user'),
    "--db-password", config.get('postgres.default_password')
])
```

**5.7. –ü–µ—Ä–µ–¥–∞—á–∞ VITE_API_PORT:**
```python
env = os.environ.copy()
env['VITE_API_PORT'] = str(self.api_port)
subprocess.Popen([...], env=env)
```

#### –§–∞–∑–∞ 4: Frontend

**5.8. –û–±–Ω–æ–≤–ª—ë–Ω `vite.config.js`:**
```javascript
// –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –ø–æ—Ä—Ç –∏–∑ environment
const API_PORT = process.env.VITE_API_PORT || '15000'

proxy: {
  '/api': { target: `http://127.0.0.1:${API_PORT}`, ... },
  '/socket.io': { target: `ws://127.0.0.1:${API_PORT}`, ... }
}
```

**5.9. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω WebSocket –≤ `graph.js`:**
```javascript
// –ë—ã–ª–æ: socket = io('http://localhost:8899', ...)
// –°—Ç–∞–ª–æ: socket = io({ ... })  // –ë–µ–∑ URL, —á–µ—Ä–µ–∑ proxy
```

#### –§–∞–∑–∞ 5: MCP Handler

**5.10. –û–±–Ω–æ–≤–ª—ë–Ω `graph_viewer_manager.py`:**
```python
# –°–æ–∑–¥–∞–Ω–∏–µ –≤—Å–µ—Ö —Ç—É–Ω–Ω–µ–ª–µ–π
tunnel_ok = tunnel_mgr.ensure_all_tunnels()

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ —Ç—É–Ω–Ω–µ–ª—è
for name, tunnel in tunnels_status.items():
    if tunnel['status'] == 'connected':
        log(f"‚úì {tunnel['name']} —Ç—É–Ω–Ω–µ–ª—å –∞–∫—Ç–∏–≤–µ–Ω...")
```

**5.11. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ WSL –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–∞:**
```python
browser_cmd = config.get('environment.browser_command')
if browser_cmd:
    # WSL: –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å–ø–µ—Ü–∏–∞–ª—å–Ω—É—é –∫–æ–º–∞–Ω–¥—É
    subprocess.run(f'{browser_cmd} {url}', shell=True)
else:
    webbrowser.open(url)
```

**5.12. –û–±–Ω–æ–≤–ª—ë–Ω `graph_viewer_status`:**
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ç—É–Ω–Ω–µ–ª–∏
- –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞

---

### –≠—Ç–∞–ø 6: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ MCP –∫–æ–º–∞–Ω–¥ ‚úÖ

**–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ 12 –∫–æ–º–∞–Ω–¥:**

#### –†–∞–±–æ—Ç–∞—é—Ç –∏–¥–µ–∞–ª—å–Ω–æ (6/12):
1. ‚úÖ `open_graph_viewer` - –∑–∞–ø—É—Å–∫–∞–µ—Ç –≤—Å—ë –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
2. ‚úÖ `stop_graph_viewer` - –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
3. ‚úÖ `check_imports` - –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ OK
4. ‚úÖ `get_selected_nodes` - WebSocket —Ä–∞–±–æ—Ç–∞–µ—Ç
5. ‚úÖ `test_arango` - legacy –¥–æ—Å—Ç—É–ø
6. ‚úÖ `check_edge_uniqueness` - –ø–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ ID –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏

#### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã, —Ç—Ä–µ–±—É—é—Ç –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ (2/12):
7. ‚ö†Ô∏è `graph_viewer_status` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ ssh_tunnels
8. ‚ö†Ô∏è –ö–æ–º–∞–Ω–¥—ã —Ä—ë–±–µ—Ä - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –ø–æ—Ä—Ç 15000

#### Legacy/—É—Å—Ç–∞—Ä–µ–≤—à–∏–µ (2/12):
9. ‚ö†Ô∏è `check_stubs` - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ä—ã–µ –ø–æ—Ä—Ç—ã
10. ‚ö†Ô∏è `test_ssh` - –∏—â–µ—Ç —Ç–æ–ª—å–∫–æ ArangoDB —Ç—É–Ω–Ω–µ–ª—å

---

### –≠—Ç–∞–ø 7: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ ID –¥–ª—è –∫–æ–º–∞–Ω–¥ —Ä—ë–±–µ—Ä ‚úÖ

**–ü—Ä–æ–±–ª–µ–º–∞:**  
–ö–æ–º–∞–Ω–¥—ã —Ä—ë–±–µ—Ä –ø—Ä–∏–Ω–∏–º–∞—é—Ç arango –∫–ª—é—á–∏ (`"c:backend"`), –Ω–æ EdgeValidator —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —á–∏—Å–ª–æ–≤—ã–º–∏ AGE IDs.

**–†–µ—à–µ–Ω–∏–µ:**

**7.1. –§—É–Ω–∫—Ü–∏—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ (api_server_age.py:170-251):**
```python
def convert_node_key_to_age_id(node_identifier: str) -> Optional[int]:
    """
    –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è: "c:backend" ‚Üí 844424930131972
    
    –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ñ–æ—Ä–º–∞—Ç—ã:
    - "canonical_nodes/c:backend" (arango ID)
    - "c:backend" (–∫–ª—é—á)
    - "844424930131972" (—É–∂–µ AGE ID)
    """
    # –ü—Ä–æ–±—É–µ–º –∫–∞–∫ —á–∏—Å–ª–æ
    try:
        return int(node_identifier)
    except ValueError:
        pass
    
    # –ò–∑–≤–ª–µ–∫–∞–µ–º –∫–ª—é—á
    key = node_identifier.split('/')[-1] if '/' in node_identifier else node_identifier
    
    # –ó–∞–ø—Ä–æ—Å –∫ PostgreSQL
    query = f"""
        SELECT * FROM cypher('common_project_graph', $$
            MATCH (n:canonical_node {{arango_key: '{key}'}})
            RETURN id(n)
        $$) AS (node_id agtype);
    """
    # ... –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç AGE ID
```

**7.2. –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤ –¥–ª—è Cypher (edge_validator_age.py:13-45):**
```python
def format_properties_for_cypher(properties: Dict[str, Any]) -> str:
    """
    Python dict ‚Üí Cypher —Ñ–æ—Ä–º–∞—Ç
    
    {"relationType": "uses", "projects": ["fepro"]}
    ‚Üì
    {relationType: "uses", projects: ["fepro"]}
    """
```

**7.3. –ü–µ—Ä–µ–ø–∏—Å–∞–Ω EdgeValidatorAGE –Ω–∞ FORMAT():**
- `check_edge_uniqueness` - f-—Å—Ç—Ä–æ–∫–∏ –≤–º–µ—Å—Ç–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- `insert_edge_safely` - Cypher —Ñ–æ—Ä–º–∞—Ç —Å–≤–æ–π—Å—Ç–≤
- `update_edge_safely` - Cypher —Ñ–æ—Ä–º–∞—Ç
- `delete_edge` - f-—Å—Ç—Ä–æ–∫–∞

**7.4. –ü—Ä–∏–º–µ–Ω–µ–Ω–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ endpoints:**
```python
# –í—Å–µ edge endpoints —Ç–µ–ø–µ—Ä—å:
from_vertex_id = convert_node_key_to_age_id(from_id)
to_vertex_id = convert_node_key_to_age_id(to_id)
```

**7.5. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω EdgeManagerHandler:**
- –ü–æ—Ä—Ç: 8899 ‚Üí 15000
- –§—É–Ω–∫—Ü–∏—è create_edge_manager_handler: 8899 ‚Üí 15000

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª)

### –¢–µ—Å—Ç Graph Viewer —á–µ—Ä–µ–∑ MCP ‚úÖ

**–ö–æ–º–∞–Ω–¥–∞:**
```
"–û—Ç–∫—Ä–æ–π –≥—Ä–∞—Ñ –≤—å—é–≤–µ—Ä"
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ –°–∏—Å—Ç–µ–º–∞ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –≥—Ä–∞—Ñ–∞ –∑–∞–ø—É—â–µ–Ω–∞

üîß –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
   ‚Ä¢ PostgreSQL —Ç—É–Ω–Ω–µ–ª—å: 15432 ‚Üí 5432 (connected, PID: 2929)
   ‚Ä¢ API —Å–µ—Ä–≤–µ—Ä: running on port 15000 (PID: 6376)
   ‚Ä¢ Vite —Å–µ—Ä–≤–µ—Ä: running on port 5173 (PID: 3498)

üåê URL: http://localhost:5173
```

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:**
- ‚úÖ –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–∞—à–∏–Ω—ã (alex-User-PC)
- ‚úÖ PostgreSQL —Ç—É–Ω–Ω–µ–ª—å —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ API –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ PostgreSQL:15432
- ‚úÖ Vite –ø–æ–ª—É—á–∞–µ—Ç VITE_API_PORT=15000
- ‚úÖ –ë—Ä–∞—É–∑–µ—Ä –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ WSL –∫–æ–º–∞–Ω–¥—É
- ‚úÖ –ì—Ä–∞—Ñ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è (39 —É–∑–ª–æ–≤, 34 —Ä–µ–±—Ä–∞)
- ‚úÖ WebSocket –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è

---

### –¢–µ—Å—Ç –∫–æ–º–∞–Ω–¥ —Ä–∞–±–æ—Ç—ã —Å —Ä—ë–±—Ä–∞–º–∏ ‚úÖ

#### –¢–µ—Å—Ç 1: –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–±—Ä–∞
```bash
POST /api/edges
{
  "_from": "c:backend",
  "_to": "t:java",
  "relationType": "uses",
  "projects": ["test_project"]
}

–†–µ–∑—É–ª—å—Ç–∞—Ç: ‚úÖ edge_id: 1125899906842659
```

#### –¢–µ—Å—Ç 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ (–ø—Ä—è–º–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ)
```bash
POST /api/edges/check
{"_from": "c:backend", "_to": "t:java"}

–†–µ–∑—É–ª—å—Ç–∞—Ç: ‚ùå is_unique: false
Error: "–°–≤—è–∑—å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç (–ø—Ä—è–º–∞—è —Å–≤—è–∑—å, ID: 1125899906842659)"
```

#### –¢–µ—Å—Ç 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ (–æ–±—Ä–∞—Ç–Ω–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ)
```bash
POST /api/edges/check
{"_from": "t:java", "_to": "c:backend"}

–†–µ–∑—É–ª—å—Ç–∞—Ç: ‚ùå is_unique: false
Error: "–°–≤—è–∑—å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç (–æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å, ID: 1125899906842659)"
```

#### –¢–µ—Å—Ç 4: –£–¥–∞–ª–µ–Ω–∏–µ —Ä–µ–±—Ä–∞
```bash
DELETE /api/edges/1125899906842659

–†–µ–∑—É–ª—å—Ç–∞—Ç: ‚úÖ "–†–µ–±—Ä–æ —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω–æ"
```

#### –¢–µ—Å—Ç 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è
```bash
POST /api/edges/check
{"_from": "c:backend", "_to": "t:java"}

–†–µ–∑—É–ª—å—Ç–∞—Ç: ‚úÖ is_unique: true
```

**–í—ã–≤–æ–¥:** –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Ä–∞–±–æ—Ç–∞–µ—Ç: —Å–æ–∑–¥–∞–Ω–∏–µ ‚Üí –≤–∞–ª–∏–¥–∞—Ü–∏—è ‚Üí —É–¥–∞–ª–µ–Ω–∏–µ

---

### –¢–µ—Å—Ç –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ Graph Viewer ‚úÖ

**–ö–æ–º–∞–Ω–¥–∞:**
```
"–û—Å—Ç–∞–Ω–æ–≤–∏ –≥—Ä–∞—Ñ –≤—å—é–≤–µ—Ä"
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ –û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ: vite_server, api_server
```

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:**
- ‚úÖ –ü—Ä–æ—Ü–µ—Å—Å—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–≤–µ—Ä—à–∞—é—Ç—Å—è
- ‚úÖ SSH —Ç—É–Ω–Ω–µ–ª–∏ –æ—Å—Ç–∞—é—Ç—Å—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- ‚úÖ –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–Ω–æ–≤–∞

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–µ—à–µ–Ω–∏—è

### –†–µ—à–µ–Ω–∏–µ 1: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ SSH —Ç—É–Ω–Ω–µ–ª–∏

**–§–∞–π–ª:** `tunnel_manager.py`

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
```python
tunnels = {
    'postgres': {  # –°–æ–∑–¥–∞–µ—Ç—Å—è –µ—Å–ª–∏ postgres.enabled: true
        'local_port': 15432,
        'remote_port': 5432,
        'name': 'PostgreSQL'
    },
    'arango': {  # –°–æ–∑–¥–∞–µ—Ç—Å—è –µ—Å–ª–∏ arango.enabled: true
        'local_port': 8529,
        'remote_port': 8529,
        'name': 'ArangoDB'
    }
}
```

**–ú–µ—Ç–æ–¥—ã:**
- `ensure_all_tunnels()` - —Å–æ–∑–¥–∞–µ—Ç –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ —Ç—É–Ω–Ω–µ–ª–∏
- `get_status()` - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ª–æ–≤–∞—Ä—å —Å—Ç–∞—Ç—É—Å–æ–≤
- `close_all_tunnels()` - –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –≤—Å–µ

---

### –†–µ—à–µ–Ω–∏–µ 2: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –ø–æ—Ä—Ç—ã —á–µ—Ä–µ–∑ environment

**ProcessManager ‚Üí Vite:**
```python
env = os.environ.copy()
env['VITE_API_PORT'] = str(self.api_port)  # 15000 –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞
subprocess.Popen([...], env=env)
```

**Vite config:**
```javascript
const API_PORT = process.env.VITE_API_PORT || '15000'
proxy: {
  '/api': { target: `http://127.0.0.1:${API_PORT}` }
}
```

---

### –†–µ—à–µ–Ω–∏–µ 3: –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è ID –¥–ª—è Apache AGE

**–ü—Ä–æ–±–ª–µ–º–∞:**  
MCP –∫–æ–º–∞–Ω–¥—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç arango –∫–ª—é—á–∏, –Ω–æ EdgeValidator —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —á–∏—Å–ª–æ–≤—ã–º–∏ AGE IDs.

**–†–µ—à–µ–Ω–∏–µ:**
```python
convert_node_key_to_age_id("c:backend")
  ‚Üì Cypher –∑–∞–ø—Ä–æ—Å
MATCH (n:canonical_node {arango_key: 'c:backend'})
RETURN id(n)
  ‚Üì
844424930131972  # AGE ID
```

---

### –†–µ—à–µ–Ω–∏–µ 4: FORMAT() –¥–ª—è Apache AGE

**–ü—Ä–æ–±–ª–µ–º–∞:**  
Apache AGE 1.6.0 –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ Cypher.

**–†–µ—à–µ–Ω–∏–µ:**
```python
# –í–º–µ—Å—Ç–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:
query = f"""
SELECT * FROM cypher('{graph_name}', $$
    MATCH (a), (b)
    WHERE id(a) = {from_id} AND id(b) = {to_id}
    CREATE (a)-[e:project_relation {{relationType: "uses"}}]->(b)
    RETURN id(e)
$$) as (edge_id agtype)
"""
```

---

### –†–µ—à–µ–Ω–∏–µ 5: –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤ –¥–ª—è Cypher

**–§—É–Ω–∫—Ü–∏—è `format_properties_for_cypher()`:**
```python
# Python dict:
{"relationType": "uses", "projects": ["fepro", "femsq"]}

# Cypher format:
{relationType: "uses", projects: ["fepro", "femsq"]}
```

**–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–∏–ø–æ–≤:**
- –°—Ç—Ä–æ–∫–∏: `key: "value"`
- –ú–∞—Å—Å–∏–≤—ã: `key: ["a", "b"]`
- –ß–∏—Å–ª–∞: `key: 123`
- Boolean: `key: true`

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (10):

1. `config/graph_viewer.yaml` - PostgreSQL –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
2. `config/machines/alex-User-PC.yaml` - –Ω–æ–≤—ã–π –ø—Ä–æ—Ñ–∏–ª—å WSL
3. `src/lib/graph_viewer/backend/tunnel_manager.py` - –ø–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞
4. `src/lib/graph_viewer/backend/process_manager.py` - 4 –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
5. `src/lib/graph_viewer/backend/api_server_age.py` - –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è ID
6. `src/lib/graph_viewer/backend/edge_validator_age.py` - FORMAT() + —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
7. `src/lib/graph_viewer/frontend/vite.config.js` - –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –ø–æ—Ä—Ç
8. `src/lib/graph_viewer/frontend/src/stores/graph.js` - WebSocket —á–µ—Ä–µ–∑ proxy
9. `src/mcp_server/handlers/graph_viewer_manager.py` - –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ç—É–Ω–Ω–µ–ª–∏ + WSL
10. `src/mcp_server/handlers/edge_manager.py` - –ø–æ—Ä—Ç 15000
11. `src/mcp_server/server.py` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω handler graph_viewer_status

### –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã (6 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤):

1. `docs-preliminary/graph-viewer-fixes-proposal.md` - –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
2. `docs-preliminary/graph-viewer-fixes-implementation-summary.md` - —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
3. `docs-preliminary/graph-viewer-fixes-testing-results.md` - —Ç–µ—Å—Ç—ã
4. `docs-preliminary/graph-viewer-mcp-success.md` - —É—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—É—Å–∫
5. `docs-preliminary/mcp-commands-testing-report.md` - —Ç–µ—Å—Ç –≤—Å–µ—Ö –∫–æ–º–∞–Ω–¥
6. `docs-preliminary/mcp-commands-summary.md` - –∫—Ä–∞—Ç–∫–∞—è —Å–≤–æ–¥–∫–∞
7. `docs-preliminary/mcp-commands-final-report.md` - —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç
8. `docs-preliminary/edge-commands-implementation-success.md` - –∫–æ–º–∞–Ω–¥—ã —Ä—ë–±–µ—Ä

### –°—Ç—Ä–æ–∫–∏ –∫–æ–¥–∞:

- **–î–æ–±–∞–≤–ª–µ–Ω–æ:** ~500 —Å—Ç—Ä–æ–∫
- **–ò–∑–º–µ–Ω–µ–Ω–æ:** ~200 —Å—Ç—Ä–æ–∫
- **–£–¥–∞–ª–µ–Ω–æ:** ~50 —Å—Ç—Ä–æ–∫

---

## üéØ –î–æ—Å—Ç–∏–≥–Ω—É—Ç—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### 1. –ü–æ–ª–Ω–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∑–∞–ø—É—Å–∫–∞ ‚úÖ
**–û–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ –≤ Cursor:**
```
"–û—Ç–∫—Ä–æ–π –≥—Ä–∞—Ñ –≤—å—é–≤–µ—Ä"
```

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
- ‚úÖ –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –º–∞—à–∏–Ω—É (WSL/Fedora)
- ‚úÖ –°–æ–∑–¥–∞–µ—Ç PostgreSQL —Ç—É–Ω–Ω–µ–ª—å
- ‚úÖ –ó–∞–ø—É—Å–∫–∞–µ—Ç API —Å–µ—Ä–≤–µ—Ä (15000)
- ‚úÖ –ó–∞–ø—É—Å–∫–∞–µ—Ç Vite (5173)
- ‚úÖ –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –±—Ä–∞—É–∑–µ—Ä
- ‚úÖ –ó–∞–≥—Ä—É–∂–∞–µ—Ç –≥—Ä–∞—Ñ –∏–∑ PostgreSQL

---

### 2. –ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç—å ‚úÖ
- ‚úÖ Windows WSL2 (alex-User-PC) - —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Fedora 42 (alex-fedora) - –≥–æ—Ç–æ–≤–æ
- ‚úÖ –õ—é–±–∞—è –º–∞—à–∏–Ω–∞ —á–µ—Ä–µ–∑ –ø—Ä–æ—Ñ–∏–ª–∏

---

### 3. PostgreSQL –≤–º–µ—Å—Ç–æ ArangoDB ‚úÖ
- ‚úÖ PostgreSQL —Ç—É–Ω–Ω–µ–ª—å (15432 ‚Üí 5432)
- ‚úÖ API –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ PostgreSQL
- ‚úÖ 39 —É–∑–ª–æ–≤ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ PostgreSQL + AGE
- ‚úÖ Apache AGE —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç

---

### 4. –†–∞–±–æ—Ç–∞ —Å —Ä—ë–±—Ä–∞–º–∏ ‚úÖ
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ —Ä—ë–±–µ—Ä —á–µ—Ä–µ–∑ arango –∫–ª—é—á–∏
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ (A‚ÜíB –∏ B‚ÜíA)
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ —Ä—ë–±–µ—Ä
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤ (–∫–æ–¥ –≥–æ—Ç–æ–≤)

---

### 5. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è ‚úÖ
- ‚úÖ –ü–æ—Ä—Ç—ã –∏–∑ config —Ñ–∞–π–ª–æ–≤
- ‚úÖ –ü—Ä–æ—Ñ–∏–ª–∏ –º–∞—à–∏–Ω
- ‚úÖ Environment –¥–ª—è Vite
- ‚úÖ –ù–µ—Ç —Ö–∞—Ä–¥–∫–æ–¥–∞

---

## üêõ –†–µ—à—ë–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

| # | –ü—Ä–æ–±–ª–µ–º–∞ | –†–µ—à–µ–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|---|----------|---------|--------|
| 1 | –ù–µ—Ç PostgreSQL —Ç—É–Ω–Ω–µ–ª—è | TunnelManager —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ —Ç—É–Ω–Ω–µ–ª—è–º–∏ | ‚úÖ |
| 2 | –ü–æ—Ä—Ç API 8899 –≤–º–µ—Å—Ç–æ 15000 | –û–±–Ω–æ–≤–ª–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è | ‚úÖ |
| 3 | ProcessManager –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç –ø—Ä–æ—Ü–µ—Å—Å | –ò—â–µ—Ç api_server_age.py | ‚úÖ |
| 4 | Vite proxy –Ω–∞ 8899 | –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –ø–æ—Ä—Ç —á–µ—Ä–µ–∑ env | ‚úÖ |
| 5 | WebSocket —Ö–∞—Ä–¥–∫–æ–¥ 8899 | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç proxy | ‚úÖ |
| 6 | –ù–µ—Ç PostgreSQL –∫–æ–Ω—Ñ–∏–≥–∞ | –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–µ–∫—Ü–∏—è postgres | ‚úÖ |
| 7 | –ë—Ä–∞—É–∑–µ—Ä –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤ WSL | –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ cmd.exe | ‚úÖ |
| 8 | –ö–æ–º–∞–Ω–¥—ã —Ä—ë–±–µ—Ä –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç | –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è ID + FORMAT() | ‚úÖ |
| 9 | Apache AGE –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã | f-—Å—Ç—Ä–æ–∫–∏ (FORMAT) | ‚úÖ |
| 10 | graph_viewer_status –æ—à–∏–±–∫–∞ | –û–±—Ä–∞–±–æ—Ç–∫–∞ ssh_tunnels —Å–ª–æ–≤–∞—Ä—è | ‚úÖ |

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:
- ‚úÖ **–û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:** 100% —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ **–ö–æ–º–∞–Ω–¥—ã —Ä—ë–±–µ—Ä:** 100% —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚ö†Ô∏è **Legacy –∫–æ–º–∞–Ω–¥—ã:** –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –¥–∞–Ω–Ω—ã–µ (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ)

### –ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å:
- ‚úÖ Graceful degradation (fallback –∑–Ω–∞—á–µ–Ω–∏—è)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∏ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤/—Ç—É–Ω–Ω–µ–ª–µ–π
- ‚úÖ –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:
- ‚úÖ –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ –∫–æ–¥–∞
- ‚úÖ –ü—Ä–æ—Ñ–∏–ª–∏ –º–∞—à–∏–Ω –¥–ª—è –æ–∫—Ä—É–∂–µ–Ω–∏–π
- ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ ConfigManager
- ‚úÖ –°–ª–∞–±–∞—è —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- ‚úÖ 8 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å–æ–∑–¥–∞–Ω–æ
- ‚úÖ Inline –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
- ‚úÖ Docstrings –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–π
- ‚úÖ –û–ø–∏—Å–∞–Ω–∏–µ —Ä–µ—à–µ–Ω–∏–π

---

## üöÄ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å

### Production ready:
- ‚úÖ Graph Viewer –∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ MCP
- ‚úÖ PostgreSQL –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- ‚úÖ –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –º–∞—à–∏–Ω—ã
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä—ë–±–µ—Ä
- ‚úÖ WebSocket –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### –¢—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è:
- ‚ö†Ô∏è –û–±–Ω–æ–≤–∏—Ç—å legacy –∫–æ–º–∞–Ω–¥—ã (check_stubs, test_ssh)
- ‚ö†Ô∏è –¢–µ—Å—Ç update_edge endpoint
- üìù –û–±–Ω–æ–≤–∏—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π README

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

### –ò–∑ —ç—Ç–æ–π —Å–µ—Å—Å–∏–∏:
1. `graph-viewer-fixes-proposal.md` - –∞–Ω–∞–ª–∏–∑ –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
2. `graph-viewer-fixes-implementation-summary.md` - —á—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
3. `graph-viewer-fixes-testing-results.md` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
4. `graph-viewer-mcp-success.md` - —É—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—É—Å–∫
5. `mcp-commands-testing-report.md` - –≤—Å–µ –∫–æ–º–∞–Ω–¥—ã MCP
6. `mcp-commands-final-report.md` - —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç
7. `edge-commands-implementation-success.md` - –∫–æ–º–∞–Ω–¥—ã —Ä—ë–±–µ—Ä

### –ü—Ä–µ–¥—ã–¥—É—â–∏–µ —Å–µ—Å—Å–∏–∏:
- `chat-2025-10-20-graph-viewer-postgresql-functions-integration.md` - PostgreSQL —Ñ—É–Ω–∫—Ü–∏–∏
- `chat-2025-01-19_postgres_functions_optimization.md` - –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
- `chat-2025-10-18-migration-to-postgresql-age-success.md` - –º–∏–≥—Ä–∞—Ü–∏—è

---

## üéä –ò—Ç–æ–≥–∏ —Å–µ—Å—Å–∏–∏

### –î–æ—Å—Ç–∏–≥–Ω—É—Ç–æ:

1. ‚úÖ **Graph Viewer —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ MCP** - –æ–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç –≤—Å—ë
2. ‚úÖ **PostgreSQL –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω** - —Ç—É–Ω–Ω–µ–ª—å, –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ, —Ñ—É–Ω–∫—Ü–∏–∏
3. ‚úÖ **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ç—É–Ω–Ω–µ–ª–∏** - –≥–∏–±–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
4. ‚úÖ **–ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç—å** - WSL –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
5. ‚úÖ **–ö–æ–º–∞–Ω–¥—ã —Ä—ë–±–µ—Ä —Ä–∞–±–æ—Ç–∞—é—Ç** - —Å–æ–∑–¥–∞–Ω–∏–µ, –≤–∞–ª–∏–¥–∞—Ü–∏—è, —É–¥–∞–ª–µ–Ω–∏–µ
6. ‚úÖ **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** - –Ω–µ—Ç —Ö–∞—Ä–¥–∫–æ–¥–∞ –ø–æ—Ä—Ç–æ–≤
7. ‚úÖ **–ü—Ä–æ—Ñ–∏–ª–∏ –º–∞—à–∏–Ω** - alex-User-PC —Ä–∞–±–æ—Ç–∞–µ—Ç
8. ‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** - 8 –ø–æ–¥—Ä–æ–±–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

### –í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã:
- **–ê–Ω–∞–ª–∏–∑ –∏ –∏–∑—É—á–µ–Ω–∏–µ:** ~1 —á–∞—Å
- **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –æ—Å–Ω–æ–≤–Ω—ã—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:** ~2 —á–∞—Å–∞
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ª–∞–¥–∫–∞:** ~1 —á–∞—Å
- **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–º–∞–Ω–¥ —Ä—ë–±–µ—Ä:** ~1 —á–∞—Å
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** ~1 —á–∞—Å
- **–í—Å–µ–≥–æ:** ~6 —á–∞—Å–æ–≤

### –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–æ–∫ Cursor:
- **–¢—Ä–µ–±–æ–≤–∞–ª–æ—Å—å:** 3 –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ –∫–æ–¥–∞
- **–¢–µ–∫—É—â–∞—è:** 2-—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ (3-—è –¥–ª—è graph_viewer_status)

---

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–µ:
1. ‚úÖ –°–æ–∑–¥–∞—Ç—å —Ä–µ–∑—é–º–µ —á–∞—Ç–∞
2. üî≤ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å GitHub (git commit + push)
3. üî≤ –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å Cursor (3-–π —Ä–∞–∑) –¥–ª—è graph_viewer_status

### –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ:
4. üî≤ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ alex-fedora
5. üî≤ –û–±–Ω–æ–≤–∏—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π README.md
6. üî≤ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å update_edge —á–µ—Ä–µ–∑ MCP

### –°—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω—ã–µ:
7. üî≤ –û–±–Ω–æ–≤–∏—Ç—å legacy –∫–æ–º–∞–Ω–¥—ã –Ω–∞ ConfigManager
8. üî≤ –î–æ–±–∞–≤–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π reload –º–æ–¥—É–ª–µ–π –≤ MCP
9. üî≤ –î–æ–±–∞–≤–∏—Ç—å healthcheck –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

---

## üèÜ –ö–ª—é—á–µ–≤—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ:
- ‚úÖ –ü–µ—Ä–µ—Ö–æ–¥ —Å ArangoDB –Ω–∞ PostgreSQL + Apache AGE
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ—Ñ–∏–ª–µ–π –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –º–∞—à–∏–Ω
- ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- ‚úÖ –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ SSH —Ç—É–Ω–Ω–µ–ª–∏

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ:
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ MCP
- ‚úÖ –†–∞–±–æ—Ç–∞ —Å —Ä—ë–±—Ä–∞–º–∏ (CRUD)
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ –≤ –æ–±–æ–∏—Ö –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è—Ö
- ‚úÖ WebSocket –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Cursor AI

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ:
- ‚úÖ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã Apache AGE –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —á–µ—Ä–µ–∑ FORMAT()
- ‚úÖ –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è arango –∫–ª—é—á–µ–π –≤ AGE IDs
- ‚úÖ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Vite
- ‚úÖ WSL –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –±—Ä–∞—É–∑–µ—Ä–∞

---

## üí° –ò–∑–≤–ª–µ—á—ë–Ω–Ω—ã–µ —É—Ä–æ–∫–∏

### Apache AGE 1.6.0:
- ‚ö†Ô∏è –ù–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã `$param` –≤ Cypher
- ‚úÖ –†–µ—à–µ–Ω–∏–µ: f-—Å—Ç—Ä–æ–∫–∏ —Å FORMAT()
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ –¥–ª—è —á–∏—Å–ª–æ–≤—ã—Ö ID
- ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è —Å—Ç—Ä–æ–∫

### MCP Server:
- ‚ö†Ô∏è –ö—ç—à–∏—Ä—É–µ—Ç –∏–º–ø–æ—Ä—Ç—ã –º–æ–¥—É–ª–µ–π
- ‚úÖ –¢—Ä–µ–±—É–µ—Ç –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ Cursor –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- üí° –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `importlib.reload()`

### WSL –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
- ‚ö†Ô∏è –ë—Ä–∞—É–∑–µ—Ä –Ω—É–∂–Ω–æ –æ—Ç–∫—Ä—ã–≤–∞—Ç—å —á–µ—Ä–µ–∑ `cmd.exe`
- ‚úÖ SSH —Ç—É–Ω–Ω–µ–ª–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ
- ‚úÖ –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ –≤ Linux

---

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Graph Viewer —Å MCP –Ω–∞ PostgreSQL + Apache AGE –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!**

### –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π
- ‚úÖ PostgreSQL + Apache AGE –≤–º–µ—Å—Ç–æ ArangoDB
- ‚úÖ –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –º–∞—à–∏–Ω—ã —á–µ—Ä–µ–∑ –ø—Ä–æ—Ñ–∏–ª–∏
- ‚úÖ –ü–æ–ª–Ω—ã–π CRUD –¥–ª—è —Ä—ë–±–µ—Ä —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
- ‚úÖ WebSocket –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- ‚úÖ WSL –ø–æ–¥–¥–µ—Ä–∂–∫–∞

### –ì–æ—Ç–æ–≤–æ –∫:
- ‚úÖ Production –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
- ‚úÖ –†–∞—Å—à–∏—Ä–µ–Ω–∏—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- ‚úÖ –†–∞–±–æ—Ç–µ –≤ —Ä–∞–∑–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è—Ö

---

**–ê–≤—Ç–æ—Ä:** AI Assistant + –ê–ª–µ–∫—Å–∞–Ω–¥—Ä  
**–î–∞—Ç–∞:** 2025-10-20  
**–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** ~6 —á–∞—Å–æ–≤  
**–í–µ—Ä—Å–∏—è:** 2.0 (PostgreSQL + Apache AGE)  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û –£–°–ü–ï–®–ù–û

