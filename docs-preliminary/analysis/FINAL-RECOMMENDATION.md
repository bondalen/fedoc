# –§–∏–Ω–∞–ª—å–Ω–∞—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä—ë–±–µ—Ä –≥—Ä–∞—Ñ–∞

**–î–∞—Ç–∞:** 17 –æ–∫—Ç—è–±—Ä—è 2025  
**–í–æ–ø—Ä–æ—Å:** –ì–¥–µ –¥–æ–ª–∂–Ω–∞ –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –ª–æ–≥–∏–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ - –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∏–ª–∏ –≤ –ë–î?  
**–û—Ç–≤–µ—Ç:** ‚úÖ –†–µ—à–µ–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–æ

---

## üí° **–ö–ª—é—á–µ–≤–æ–π –∏–Ω—Å–∞–π—Ç**

**–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ø—Ä–∞–≤:** –°—É—Ç—å –Ω–µ –≤ —Ç—Ä–∏–≥–≥–µ—Ä–∞—Ö –∫–∞–∫ —Ç–∞–∫–æ–≤—ã—Ö, –∞ –≤ —Ç–æ–º, —á—Ç–æ **–ª–æ–≥–∏–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –ë–î**, –∞ –Ω–µ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏.

---

## üìä **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–¥—Ö–æ–¥–æ–≤**

### **–ü–æ–¥—Ö–æ–¥ 1: –í–∞–ª–∏–¥–∞—Ü–∏—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏** (—Ç–µ–∫—É—â–∏–π —Å ArangoDB)

```python
# Python –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
def create_edge(from_id, to_id):
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ (–∑–∞–ø—Ä–æ—Å –∫ –ë–î)
    if edge_validator.check_uniqueness(from_id, to_id):
        # –°–æ–∑–¥–∞–Ω–∏–µ (–∑–∞–ø—Ä–æ—Å –∫ –ë–î)
        return db.create_edge(from_id, to_id)
    else:
        raise DuplicateError()
```

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- –õ–æ–≥–∏–∫–∞: 50% –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ + 50% –ë–î
- –ó–∞–ø—Ä–æ—Å–æ–≤: 2 (–ø—Ä–æ–≤–µ—Ä–∫–∞ + —Å–æ–∑–¥–∞–Ω–∏–µ)
- –ê—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å: ‚ö†Ô∏è –î–≤–µ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

### **–ü–æ–¥—Ö–æ–¥ 2: –•—Ä–∞–Ω–∏–º–∞—è –ø—Ä–æ—Ü–µ–¥—É—Ä–∞ PostgreSQL** (–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ)

```python
# Python –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
def create_edge(from_id, to_id):
    # –û–¥–∏–Ω –≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ –ë–î
    return db.call_function('create_edge_safe', from_id, to_id)
```

```sql
-- PostgreSQL —Ñ—É–Ω–∫—Ü–∏—è
CREATE FUNCTION create_edge_safe(from_id, to_id) AS $$
BEGIN
    -- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ (SQL)
    IF EXISTS (–¥—É–±–ª–∏–∫–∞—Ç) THEN
        RAISE EXCEPTION 'Duplicate';
    END IF;
    
    -- –°–æ–∑–¥–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Cypher (?)
    EXECUTE 'SELECT cypher(...CREATE...)';
    
    RETURN success;
END;
$$ LANGUAGE plpgsql;
```

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- –õ–æ–≥–∏–∫–∞: 100% –≤ –ë–î
- –ó–∞–ø—Ä–æ—Å–æ–≤: 1 (–≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏)
- –ê—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å: ‚úÖ –û–¥–Ω–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è

---

## üîç **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑**

### **–í–æ–ø—Ä–æ—Å: –ú–æ–∂–µ—Ç –ª–∏ PL/pgSQL —Ñ—É–Ω–∫—Ü–∏—è –≤—ã–∑–≤–∞—Ç—å cypher()?**

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:**
- ‚ùå `PERFORM cypher(...)` - —Ñ—É–Ω–∫—Ü–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ
- ‚è≥ `EXECUTE 'SELECT cypher(...)'` - —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞:** –ü—Ä—è–º–∞—è –≤—Å—Ç–∞–≤–∫–∞ –≤ —Ç–∞–±–ª–∏—Ü—É AGE:
```sql
INSERT INTO graph._ag_label_edge (id, start_id, end_id, properties)
VALUES (nextval(...), from_id, to_id, props);
```

**–†–∏—Å–∫–∏:**
- ‚ö†Ô∏è –û–±—Ö–æ–¥ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –ª–æ–≥–∏–∫–∏ AGE
- ‚ö†Ô∏è –ú–æ–∂–µ—Ç —Å–ª–æ–º–∞—Ç—å –∏–Ω–¥–µ–∫—Å—ã –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
- ‚ö†Ô∏è –ù–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –±—É–¥—É—â–∏–º–∏ –≤–µ—Ä—Å–∏—è–º–∏

---

## üéØ **–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**

### **–í–∞—Ä–∏–∞–Ω—Ç A: PostgreSQL + AGE + –§—É–Ω–∫—Ü–∏–∏** ‚≠ê **–ï–°–õ–ò –¢–ï–°–¢ –£–°–ü–ï–®–ï–ù**

**–ï—Å–ª–∏** EXECUTE —Å cypher() —Ä–∞–±–æ—Ç–∞–µ—Ç:

‚úÖ **–ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ PostgreSQL + Apache AGE**

**–ü–ª–∞–Ω:**
1. –°–æ–∑–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤ PostgreSQL
2. –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ ArangoDB
3. –ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å AQL ‚Üí Cypher
4. –£–ø—Ä–æ—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–æ–¥–∏–Ω –≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏)

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –í—Å—è –ª–æ–≥–∏–∫–∞ –≤ –ë–î
- ‚úÖ PostgreSQL - –Ω–∞–¥–µ–∂–Ω–µ–µ, –ø–æ–ø—É–ª—è—Ä–Ω–µ–µ
- ‚úÖ –§—É–Ω–∫—Ü–∏–∏ + constraint + —Ç—Ä–∏–≥–≥–µ—Ä—ã –Ω–∞ —Ç–∞–±–ª–∏—Ü–∞—Ö
- ‚úÖ –û–≥—Ä–æ–º–Ω–∞—è —ç–∫–æ—Å–∏—Å—Ç–µ–º–∞

**–í—Ä–µ–º—è –º–∏–≥—Ä–∞—Ü–∏–∏:** ~2-3 –Ω–µ–¥–µ–ª–∏

### **–í–∞—Ä–∏–∞–Ω—Ç B: ArangoDB + –í–∞–ª–∏–¥–∞—Ü–∏—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏** ‚≠ê **–¢–ï–ö–£–©–ï–ï**

**–ï—Å–ª–∏** EXECUTE —Å cypher() –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç:

‚úÖ **–û—Å—Ç–∞–≤–∏—Ç—å ArangoDB Community**

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –£–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ 100%
- ‚úÖ –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è –≥—Ä–∞—Ñ–æ–≤
- ‚úÖ AQL —É–¥–æ–±–Ω–µ–µ –¥–ª—è multi-model
- ‚úÖ –ù–µ—Ç –∑–∞—Ç—Ä–∞—Ç –Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—é

---

## üìã **–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –°–ï–ô–ß–ê–°:**

### **–ü—Ä–æ–≤–µ—Å—Ç–∏ —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç:**

```sql
-- –¢–µ—Å—Ç –≤—ã–∑–æ–≤–∞ Cypher –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏ PostgreSQL
CREATE FUNCTION final_test() AS $$
DECLARE
    result RECORD;
BEGIN
    -- –ü–æ–ø—ã—Ç–∫–∞ –≤—ã–∑–≤–∞—Ç—å Cypher —á–µ—Ä–µ–∑ EXECUTE
    EXECUTE 'SELECT * FROM ag_catalog.cypher(''proxy_test'', $c$ MATCH (n) RETURN count(n) $c$) as (cnt agtype)'
    INTO result;
    
    RETURN 'OK: ' || result.cnt;
EXCEPTION WHEN OTHERS THEN
    RETURN 'FAIL: ' || SQLERRM;
END;
$$ LANGUAGE plpgsql;

SELECT final_test();
```

**–ï—Å–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç "OK:"** ‚Üí PostgreSQL + AGE –æ—Ç–ª–∏—á–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ!  
**–ï—Å–ª–∏ "FAIL:"** ‚Üí ArangoDB –ª—É—á—à–µ

---

## ‚úÖ **–†–ï–ó–Æ–ú–ï**

### **–í–∞—à–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ –≤–µ—Ä–Ω–æ–µ:**

‚úÖ PostgreSQL **–ø–æ–∑–≤–æ–ª—è–µ—Ç** —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ (–≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç ArangoDB CE)  
‚úÖ –§—É–Ω–∫—Ü–∏–∏ **–º–æ–≥—É—Ç** —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –≤ –ë–î  
‚úÖ –≠—Ç–æ **—É–ø—Ä–æ—â–∞–µ—Ç** –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (1 –≤—ã–∑–æ–≤ –≤–º–µ—Å—Ç–æ 2)  
‚úÖ –î–∞–µ—Ç **–∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å** (–ø—Ä–æ–≤–µ—Ä–∫–∞ + —Å–æ–∑–¥–∞–Ω–∏–µ –≤ –æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏)

### **–ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**

‚ùì –ú–æ–∂–µ—Ç –ª–∏ —Ñ—É–Ω–∫—Ü–∏—è PostgreSQL **–≤—ã–∑–≤–∞—Ç—å cypher()** –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ä—ë–±–µ—Ä –≤ –≥—Ä–∞—Ñ–µ AGE

**–ï—Å–ª–∏ –î–ê** ‚Üí PostgreSQL + AGE —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è **–ª—É—á—à–∏–º** —Ä–µ—à–µ–Ω–∏–µ–º  
**–ï—Å–ª–∏ –ù–ï–¢** ‚Üí ArangoDB –æ—Å—Ç–∞–µ—Ç—Å—è **–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–º**

---

**Apache AGE —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ –≤–∞—à–µ–º —Å–µ—Ä–≤–µ—Ä–µ - –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Å—Ç–∏ —Ç–µ—Å—Ç –∫–æ–≥–¥–∞ —É–¥–æ–±–Ω–æ!** üî¨
