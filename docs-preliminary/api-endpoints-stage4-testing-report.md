# –û—Ç—á–µ—Ç –æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –≠—Ç–∞–ø–∞ 4: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è MCP –∫–æ–º–∞–Ω–¥ –≤ server.py

**–î–∞—Ç–∞:** 2025-11-03  
**–ó–∞–¥–∞—á–∞:** –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –Ω–æ–≤—ã—Ö MCP –∫–æ–º–∞–Ω–¥ –≤ —Å–µ—Ä–≤–µ—Ä–µ  
**–§–∞–π–ª:** `src/mcp_server/server.py`

---

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. –ò–º–ø–æ—Ä—Ç handler'–∞ ‚úÖ

–î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç `edge_project_manager`:
```python
from handlers.edge_project_manager import create_edge_project_manager_handler
```

### 2. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è handler'–∞ ‚úÖ

–í –º–µ—Ç–æ–¥–µ `__init__()` –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è:
```python
self.edge_project_manager = create_edge_project_manager_handler()
```

### 3. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–º–∞–Ω–¥ –≤ `_register_tools()` ‚úÖ

–î–æ–±–∞–≤–ª–µ–Ω—ã –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –¥–ª—è 7 –Ω–æ–≤—ã—Ö –∫–æ–º–∞–Ω–¥:

1. ‚úÖ `edge_get_projects` - –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–æ–µ–∫—Ç—ã —Ä–µ–±—Ä–∞
2. ‚úÖ `edge_add_project` - –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–µ–∫—Ç –∫ —Ä–µ–±—Ä—É
3. ‚úÖ `edge_remove_project` - –£–¥–∞–ª–∏—Ç—å –ø—Ä–æ–µ–∫—Ç –∏–∑ —Ä–µ–±—Ä–∞
4. ‚úÖ `edge_get_info` - –ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–µ–±—Ä–µ
5. ‚úÖ `nodes_check_connection` - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–≤—è–∑—å –º–µ–∂–¥—É —É–∑–ª–∞–º–∏
6. ‚úÖ `edge_batch_add_projects` - –ú–∞—Å—Å–æ–≤–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
7. ‚úÖ `edge_batch_remove_projects` - –ú–∞—Å—Å–æ–≤–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

### 4. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –≤ `_register_handlers()` ‚úÖ

–î–æ–±–∞–≤–ª–µ–Ω—ã —Å—Å—ã–ª–∫–∏ –Ω–∞ –º–µ—Ç–æ–¥—ã –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤:
```python
"edge_get_projects": self._handle_get_edge_projects,
"edge_add_project": self._handle_add_project_to_edge,
"edge_remove_project": self._handle_remove_project_from_edge,
"edge_get_info": self._handle_get_edge_info,
"nodes_check_connection": self._handle_check_connection,
"edge_batch_add_projects": self._handle_batch_add_projects,
"edge_batch_remove_projects": self._handle_batch_remove_projects
```

### 5. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –º–µ—Ç–æ–¥–æ–≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ ‚úÖ

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –≤—Å–µ 7 –º–µ—Ç–æ–¥–æ–≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å:
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏–µ–π –≤—Ö–æ–¥–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- ‚úÖ –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –¥–ª—è MCP
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫
- ‚úÖ –ü–æ–Ω—è—Ç–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

---

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞

**–°–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:**
- ‚úÖ `server.py` - —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω
- ‚úÖ `edge_project_manager.py` - —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤:**
- ‚úÖ –í—Å–µ 7 –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –Ω–∞–π–¥–µ–Ω—ã –≤ –∫–æ–¥–µ
- ‚úÖ –í—Å–µ –∫–æ–º–∞–Ω–¥—ã –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –≤ `_register_tools()`
- ‚úÖ –í—Å–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤ `_register_handlers()`

---

## üìù –î–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

### `_handle_get_edge_projects`
- –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–µ–∫—Ç–æ–≤ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Ä–æ–ª—è—Ö
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç "–ü—Ä–æ–µ–∫—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã" –µ—Å–ª–∏ —Å–ø–∏—Å–æ–∫ –ø—É—Å—Ç

### `_handle_add_project_to_edge`
- –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç `edge_id` –∏ `project_key`
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ `role` –∏ `weight`

### `_handle_remove_project_from_edge`
- –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏

### `_handle_get_edge_info`
- –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –ø–æ–ª–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ä–µ–±—Ä–µ
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —É–∑–ª—ã (from/to) —Å –∏—Ö –∫–ª—é—á–∞–º–∏, –∏–º–µ–Ω–∞–º–∏ –∏ —Ç–∏–ø–∞–º–∏
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ç–∏–ø —Å–≤—è–∑–∏ –∏ —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–µ–∫—Ç–æ–≤

### `_handle_check_connection`
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ —Å–≤—è–∑–∏
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ (‚úÖ/‚ùå)
- –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ –ø–æ–Ω—è—Ç–Ω–æ–º –≤–∏–¥–µ

### `_handle_batch_add_projects`
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É: total, added, skipped
- –í—ã–≤–æ–¥–∏—Ç —Å–ø–∏—Å–æ–∫ –æ—à–∏–±–æ–∫ (–ø–µ—Ä–≤—ã–µ 5)
- –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –º–∞—Å—Å–æ–≤–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏

### `_handle_batch_remove_projects`
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É: total, removed, not_found
- –í—ã–≤–æ–¥–∏—Ç —Å–ø–∏—Å–æ–∫ –æ—à–∏–±–æ–∫ (–ø–µ—Ä–≤—ã–µ 5)
- –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –º–∞—Å—Å–æ–≤–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏

---

## ‚úÖ –ò—Ç–æ–≥–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í–°–ï –ö–û–ú–ê–ù–î–´ –ó–ê–†–ï–ì–ò–°–¢–†–ò–†–û–í–ê–ù–´**

–í—Å–µ 7 –Ω–æ–≤—ã—Ö MCP –∫–æ–º–∞–Ω–¥ —É—Å–ø–µ—à–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤ server.py –∏ –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é.

---

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ **–≠—Ç–∞–ø 1** - API endpoints –¥–ª—è –æ–¥–∏–Ω–æ—á–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
2. ‚úÖ **–≠—Ç–∞–ø 2** - API endpoints –¥–ª—è –º–∞—Å—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
3. ‚úÖ **–≠—Ç–∞–ø 3** - MCP Handler –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å endpoints
4. ‚úÖ **–≠—Ç–∞–ø 4** - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è MCP –∫–æ–º–∞–Ω–¥ –≤ server.py

**–í—Å–µ —ç—Ç–∞–ø—ã –∑–∞–≤–µ—Ä—à–µ–Ω—ã!** üéâ

---

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–≠—Ç–∞–ø 4 —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à—ë–Ω!** –í—Å–µ –Ω–æ–≤—ã–µ MCP –∫–æ–º–∞–Ω–¥—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤ —Å–µ—Ä–≤–µ—Ä–µ. –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã —á–µ—Ä–µ–∑ MCP –ø—Ä–æ—Ç–æ–∫–æ–ª –≤ Cursor AI –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–æ–µ–∫—Ç–∞–º–∏ —Ä—ë–±–µ—Ä –≥—Ä–∞—Ñ–∞.

