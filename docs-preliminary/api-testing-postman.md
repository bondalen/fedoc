# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –Ω–æ–≤—ã—Ö API endpoints –≤ Postman

**–î–∞—Ç–∞:** 2025-11-03  
**API Server:** `http://localhost:15000` (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ, –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –¥—Ä—É–≥–æ–π –ø–æ—Ä—Ç)

---

## üîç –®–∞–≥ 0: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ API

### –ó–∞–ø—Ä–æ—Å 1: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–ø–∏—Å–æ–∫ —É–∑–ª–æ–≤
**–ú–µ—Ç–æ–¥:** `GET`  
**URL:** `http://localhost:15000/api/nodes`  
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —É–∑–ª–æ–≤, —á—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ API —Ä–∞–±–æ—Ç–∞–µ—Ç

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ú–∞—Å—Å–∏–≤ —É–∑–ª–æ–≤ —Å –ø–æ–ª—è–º–∏ `_id`, `_key`, `name`

---

## üìä –®–∞–≥ 1: –ü–æ–ª—É—á–∏—Ç—å ID —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Ä–µ–±—Ä–∞

–ü–µ—Ä–µ–¥ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º –Ω–æ–≤—ã—Ö endpoints –Ω—É–∂–Ω–æ –Ω–∞–π—Ç–∏ —Ä–µ–∞–ª—å–Ω—ã–π `edge_id` –∏–∑ –≤–∞—à–µ–≥–æ –≥—Ä–∞—Ñ–∞.

### –ó–∞–ø—Ä–æ—Å 1.1: –ü–æ–ª—É—á–∏—Ç—å –≥—Ä–∞—Ñ (—á—Ç–æ–±—ã –Ω–∞–π—Ç–∏ edge_id)
**–ú–µ—Ç–æ–¥:** `GET`  
**URL:** `http://localhost:15000/api/graph?project=fedoc`  
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–ª—É—á–∏—Ç—å –≥—Ä–∞—Ñ –ø—Ä–æ–µ–∫—Ç–∞ fedoc

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã (Query Params):**
- `project`: `fedoc` (–∏–ª–∏ `fepro`, `femsq`)

**–í –æ—Ç–≤–µ—Ç–µ –Ω–∞–π–¥–∏—Ç–µ –ª—é–±–æ–π `edge_id` –∏–∑ –º–∞—Å—Å–∏–≤–∞ `edges`. –ü—Ä–∏–º–µ—Ä:**
```json
{
  "edges": [
    {
      "id": 1125899906842676,  // ‚Üê –≠—Ç–æ edge_id
      "from": 844424930132002,
      "to": 844424930131981
    }
  ]
}
```

**–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ —Ä–µ–±—Ä–æ, –µ—Å–ª–∏ –∑–Ω–∞–µ—Ç–µ –µ–≥–æ ID.**

---

## ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö endpoints

### Endpoint 1: `GET /api/edges/<edge_id>/projects`

**–ú–µ—Ç–æ–¥:** `GET`  
**URL:** `http://localhost:15000/api/edges/1125899906842676/projects`  
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–µ–∫—Ç–æ–≤ –¥–ª—è —Ä–µ–±—Ä–∞

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- –ó–∞–º–µ–Ω–∏—Ç–µ `1125899906842676` –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π `edge_id` –∏–∑ –®–∞–≥–∞ 1

**Headers:**
- –ù–µ —Ç—Ä–µ–±—É—é—Ç—Å—è

**Body:**
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
{
  "success": true,
  "edge_id": 1125899906842676,
  "projects": [
    {
      "key": "fepro",
      "name": "FEPRO",
      "description": null,
      "role": "participant",
      "weight": 1.0,
      "created_at": "2025-11-03T10:00:00",
      "created_by": "api",
      "metadata": {}
    }
  ]
}
```

---

### Endpoint 2: `POST /api/edges/<edge_id>/projects`

**–ú–µ—Ç–æ–¥:** `POST`  
**URL:** `http://localhost:15000/api/edges/1125899906842676/projects`  
**–û–ø–∏—Å–∞–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–µ–∫—Ç –∫ —Ä–µ–±—Ä—É

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- –ó–∞–º–µ–Ω–∏—Ç–µ `1125899906842676` –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π `edge_id`

**Headers:**
- `Content-Type`: `application/json`

**Body (raw JSON):**
```json
{
  "project_key": "fepro",
  "role": "participant",
  "weight": 1.0,
  "created_by": "api",
  "metadata": {}
}
```

**–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π Body (—Ç–æ–ª—å–∫–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è):**
```json
{
  "project_key": "fepro"
}
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
{
  "success": true,
  "message": "–ü—Ä–æ–µ–∫—Ç fepro –¥–æ–±–∞–≤–ª–µ–Ω –∫ —Ä–µ–±—Ä—É 1125899906842676",
  "edge_id": 1125899906842676,
  "project_key": "fepro"
}
```

**–í–æ–∑–º–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏:**
- `404`: –†–µ–±—Ä–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
- `404`: –ü—Ä–æ–µ–∫—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø—Ä–æ–µ–∫—Ç `fepro`, `femsq` –∏–ª–∏ `fedoc` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
- `400`: –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ø–æ–ª–µ `project_key`

---

### Endpoint 3: `DELETE /api/edges/<edge_id>/projects/<project_key>`

**–ú–µ—Ç–æ–¥:** `DELETE`  
**URL:** `http://localhost:15000/api/edges/1125899906842676/projects/fepro`  
**–û–ø–∏—Å–∞–Ω–∏–µ:** –£–¥–∞–ª–∏—Ç—å –ø—Ä–æ–µ–∫—Ç –∏–∑ —Ä–µ–±—Ä–∞

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- –ó–∞–º–µ–Ω–∏—Ç–µ `1125899906842676` –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π `edge_id`
- –ó–∞–º–µ–Ω–∏—Ç–µ `fepro` –Ω–∞ –∫–ª—é—á –ø—Ä–æ–µ–∫—Ç–∞ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è

**Headers:**
- –ù–µ —Ç—Ä–µ–±—É—é—Ç—Å—è

**Body:**
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
{
  "success": true,
  "message": "–ü—Ä–æ–µ–∫—Ç fepro —É–¥–∞–ª—ë–Ω –∏–∑ —Ä–µ–±—Ä–∞ 1125899906842676",
  "edge_id": 1125899906842676,
  "project_key": "fepro"
}
```

**–í–æ–∑–º–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏:**
- `404`: –†–µ–±—Ä–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
- `404`: –ü—Ä–æ–µ–∫—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω
- `404`: –ü—Ä–æ–µ–∫—Ç –Ω–µ —Å–≤—è–∑–∞–Ω —Å —Ä–µ–±—Ä–æ–º (—É–∂–µ —É–¥–∞–ª—ë–Ω)

---

### Endpoint 4: `GET /api/edges/<edge_id>`

**–ú–µ—Ç–æ–¥:** `GET`  
**URL:** `http://localhost:15000/api/edges/1125899906842676`  
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ä–µ–±—Ä–µ

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- –ó–∞–º–µ–Ω–∏—Ç–µ `1125899906842676` –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π `edge_id`

**Headers:**
- –ù–µ —Ç—Ä–µ–±—É—é—Ç—Å—è

**Body:**
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
{
  "success": true,
  "edge": {
    "edge_id": 1125899906842676,
    "from": {
      "id": 844424930132002,
      "key": "t:spring-boot",
      "name": "Spring Boot",
      "kind": "product"
    },
    "to": {
      "id": 844424930131981,
      "key": "c:backend-security",
      "name": "–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –±–∞–∫–µ–Ω–¥–∞",
      "kind": "concept"
    },
    "relation_type": "uses",
    "projects": ["fepro", "femsq"]
  }
}
```

**–í–æ–∑–º–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏:**
- `404`: –†–µ–±—Ä–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ

---

### Endpoint 5: `POST /api/edges/check-connection`

**–ú–µ—Ç–æ–¥:** `POST`  
**URL:** `http://localhost:15000/api/edges/check-connection`  
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ —Å–≤—è–∑–∏ –º–µ–∂–¥—É —É–∑–ª–∞–º–∏

**Headers:**
- `Content-Type`: `application/json`

**Body (raw JSON) - –≤–∞—Ä–∏–∞–Ω—Ç 1 (—Å —Ñ–∏–ª—å—Ç—Ä–æ–º –ø—Ä–æ–µ–∫—Ç–∞):**
```json
{
  "from_node": "t:spring-boot",
  "to_node": "c:backend-security",
  "project_filter": "fepro"
}
```

**Body (raw JSON) - –≤–∞—Ä–∏–∞–Ω—Ç 2 (–±–µ–∑ —Ñ–∏–ª—å—Ç—Ä–∞, –ø—Ä–æ–≤–µ—Ä–∏—Ç –≤—Å–µ –ø—Ä–æ–µ–∫—Ç—ã):**
```json
{
  "from_node": "t:spring-boot",
  "to_node": "c:backend-security"
}
```

**Body (raw JSON) - –≤–∞—Ä–∏–∞–Ω—Ç 3 (–∏—Å–ø–æ–ª—å–∑—É—è AGE ID):**
```json
{
  "from_node": "844424930132002",
  "to_node": "844424930131981"
}
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç (–µ—Å–ª–∏ —Å–≤—è–∑—å —Å—É—â–µ—Å—Ç–≤—É–µ—Ç):**
```json
{
  "connected": true,
  "edge": {
    "edge_id": 1125899906842676,
    "from_node": 844424930132002,
    "to_node": 844424930131981,
    "relation_type": "uses",
    "projects": ["fepro", "femsq"]
  },
  "for_project": {
    "fepro": true,
    "femsq": true,
    "fedoc": false
  }
}
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç (–µ—Å–ª–∏ —Å–≤—è–∑—å –ù–ï —Å—É—â–µ—Å—Ç–≤—É–µ—Ç):**
```json
{
  "connected": false,
  "edge": null,
  "for_project": {}
}
```

**–í–æ–∑–º–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏:**
- `400`: –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è `from_node` –∏–ª–∏ `to_node`
- `400`: –£–∑–µ–ª –Ω–µ –Ω–∞–π–¥–µ–Ω (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∫–ª—é—á –∏–ª–∏ ID)

---

## üîÑ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

1. **–®–∞–≥ 0**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ API —Ä–∞–±–æ—Ç–∞–µ—Ç (`GET /api/nodes`)
2. **–®–∞–≥ 1**: –ü–æ–ª—É—á–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π `edge_id` (`GET /api/graph?project=fedoc`)
3. **Endpoint 1**: –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–æ–µ–∫—Ç—ã —Ä–µ–±—Ä–∞ (`GET /api/edges/<id>/projects`)
4. **Endpoint 4**: –ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ä–µ–±—Ä–µ (`GET /api/edges/<id>`)
5. **Endpoint 5**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–≤—è–∑—å (`POST /api/edges/check-connection`)
6. **Endpoint 2**: –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–µ–∫—Ç –∫ —Ä–µ–±—Ä—É (`POST /api/edges/<id>/projects`)
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø—Ä–æ–µ–∫—Ç –¥–æ–±–∞–≤–∏–ª—Å—è (Endpoint 1)
7. **Endpoint 3**: –£–¥–∞–ª–∏—Ç—å –ø—Ä–æ–µ–∫—Ç –∏–∑ —Ä–µ–±—Ä–∞ (`DELETE /api/edges/<id>/projects/<key>`)
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø—Ä–æ–µ–∫—Ç —É–¥–∞–ª—ë–Ω (Endpoint 1)

---

## üêõ –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—à–∏–±–æ–∫

### –¢–µ—Å—Ç –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Ä–µ–±—Ä–∞:
**URL:** `http://localhost:15000/api/edges/999999999/projects`  
**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** `404 Not Found` –∏–ª–∏ `500 Internal Server Error` —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º –æ–± –æ—à–∏–±–∫–µ

### –¢–µ—Å—Ç –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞:
**POST:** `http://localhost:15000/api/edges/1125899906842676/projects`  
**Body:**
```json
{
  "project_key": "nonexistent-project"
}
```
**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** `404 Not Found` —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º "–ü—Ä–æ–µ–∫—Ç nonexistent-project –Ω–µ –Ω–∞–π–¥–µ–Ω"

### –¢–µ—Å—Ç –±–µ–∑ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π:
**POST:** `http://localhost:15000/api/edges/1125899906842676/projects`  
**Body:**
```json
{}
```
**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** `400 Bad Request` —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º "–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ project_key"

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

1. **–ü–æ—Ä—Ç:** –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é API —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ø–æ—Ä—Ç—É `15000`, –Ω–æ –º–æ–∂–µ—Ç –±—ã—Ç—å `8899` –µ—Å–ª–∏ –∑–∞–ø—É—â–µ–Ω –Ω–∞–ø—Ä—è–º—É—é. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –∏–ª–∏ —Å—Ç–∞—Ç—É—Å —á–µ—Ä–µ–∑ MCP –∫–æ–º–∞–Ω–¥—É `graph_viewer_status`.

2. **–†–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:** –ó–∞–º–µ–Ω–∏—Ç–µ –≤—Å–µ –ø—Ä–∏–º–µ—Ä—ã `edge_id` –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ –≤–∞—à–µ–≥–æ –≥—Ä–∞—Ñ–∞.

3. **–ö–ª—é—á–∏ –ø—Ä–æ–µ–∫—Ç–æ–≤:** –í –±–∞–∑–µ –¥–æ–ª–∂–Ω—ã —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç—ã —Å –∫–ª—é—á–∞–º–∏: `fedoc`, `fepro`, `femsq`.

4. **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:** –í —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏ API –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- `docs-preliminary/mcp-commands-improvements-proposal.md` - –ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ endpoints
- `src/lib/graph_viewer/backend/api_server_age.py` - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è endpoints

