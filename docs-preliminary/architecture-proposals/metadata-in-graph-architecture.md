# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∫–ª–∞—Å—Å–æ–≤ –≤ –≥—Ä–∞—Ñ–µ

**–î–∞—Ç–∞**: 2025-11-04  
**–°—Ç–∞—Ç—É—Å**: –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –í—ã—Å–æ–∫–∏–π

---

## –ö–æ–Ω—Ü–µ–ø—Ü–∏—è

–•—Ä–∞–Ω–∏—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≤—Å–µ—Ö –∫–ª–∞—Å—Å–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞ (—Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –∏ –±–∞–∫–µ–Ω–¥) –≤ —Å–∞–º–æ–º –≥—Ä–∞—Ñ–µ –∫–∞–∫ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –º–µ—Ç–∞—É–∑–ª—ã. –ì—Ä–∞—Ñ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º –∏—Å—Ç–∏–Ω—ã –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞.

**–§–∏–ª–æ—Å–æ—Ñ–∏—è fedoc**: –ù–∞ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π –º–∞—à–∏–Ω–µ —Ö—Ä–∞–Ω—è—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏ —Å–µ–∫—Ä–µ—Ç—ã. –í—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–µ–∫—Ç–µ –∏ –µ–≥–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ ‚Äî –≤ –≥—Ä–∞—Ñ–µ.

---

## –ù–æ–≤—ã–µ —Ç–∏–ø—ã —É–∑–ª–æ–≤

### –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –ø—Ä–µ—Ñ–∏–∫—Å–æ–≤

```
–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ:
- c:* (concept) ‚Äî –∫–æ–Ω—Ü–µ–ø—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞
- t:* (technology) ‚Äî —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- v:* (version) ‚Äî –≤–µ—Ä—Å–∏–∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

–ù–æ–≤—ã–µ:
- m:* (meta) ‚Äî –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –æ–±—â–µ–≥–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è
- cls:* (class-def) ‚Äî –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–ª–∞—Å—Å–∞
- prop:* (property-def) ‚Äî –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞ –∫–ª–∞—Å—Å–∞
- meth:* (method-def) ‚Äî –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–µ—Ç–æ–¥–∞ –∫–ª–∞—Å—Å–∞
- rel:* (relation-def) ‚Äî –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–≤—è–∑–∏ –º–µ–∂–¥—É –∫–ª–∞—Å—Å–∞–º–∏
```

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–µ—Ç–∞—É–∑–ª–æ–≤ –≤ –≥—Ä–∞—Ñ–µ

### –ü–æ–ª–Ω–∞—è –∏–µ—Ä–∞—Ä—Ö–∏—è

```
c:project (fedoc)
  c:dev-objects (–û–±—ä–µ–∫—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
    c:meta (–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç–∞) üÜï
      
      # === –°–ò–°–¢–ï–ú–ê –ö–õ–ê–°–°–û–í ===
      c:class-system (–°–∏—Å—Ç–µ–º–∞ –∫–ª–∞—Å—Å–æ–≤) üÜï
        
        # –ë–∞–∑–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã
        cls:GraphObject (–ö–ª–∞—Å—Å: GraphObject)
          properties: {
            abstract: true,
            description: "–ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è –≤—Å–µ—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –≥—Ä–∞—Ñ–∞",
            backend_module: "models.base",
            frontend_module: "models/base.js"
          }
          ‚îú‚îÄ‚Üí prop:GraphObject.id
          ‚îÇ     properties: {type: "string", required: true}
          ‚îú‚îÄ‚Üí prop:GraphObject.created_at
          ‚îÇ     properties: {type: "datetime", required: false}
          ‚îú‚îÄ‚Üí prop:GraphObject.updated_at
          ‚îÇ     properties: {type: "datetime", required: false}
          ‚îú‚îÄ‚Üí meth:GraphObject.to_dict
          ‚îÇ     properties: {returns: "dict", description: "–°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤ —Å–ª–æ–≤–∞—Ä—å"}
          ‚îú‚îÄ‚Üí meth:GraphObject.from_dict
          ‚îÇ     properties: {returns: "GraphObject", static: true}
          ‚îú‚îÄ‚Üí meth:GraphObject.validate
          ‚îÇ     properties: {returns: "bool", description: "–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö"}
          ‚îî‚îÄ‚Üí meth:GraphObject.to_json
                properties: {returns: "string", description: "–°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤ JSON"}
        
        cls:GraphVertex (–ö–ª–∞—Å—Å: GraphVertex)
          properties: {
            extends: "cls:GraphObject",
            abstract: true,
            backend_module: "models.vertices.graph_vertex",
            frontend_module: "models/vertices/GraphVertex.js"
          }
          ‚îú‚îÄ‚Üí prop:GraphVertex.key
          ‚îÇ     properties: {type: "string", required: true, pattern: "^[ctv]:.+"}
          ‚îú‚îÄ‚Üí prop:GraphVertex.label
          ‚îÇ     properties: {type: "string", required: true}
          ‚îú‚îÄ‚Üí prop:GraphVertex.node_type
          ‚îÇ     properties: {type: "enum", values: ["concept", "technology", "version", "default"]}
          ‚îú‚îÄ‚Üí meth:GraphVertex.infer_type
          ‚îÇ     properties: {returns: "string", description: "–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–∏–ø –ø–æ –∫–ª—é—á—É"}
          ‚îú‚îÄ‚Üí meth:GraphVertex.get_visual_style
          ‚îÇ     properties: {returns: "dict", params: {theme: "string"}}
          ‚îú‚îÄ‚Üí meth:GraphVertex.to_vis_format
          ‚îÇ     properties: {returns: "dict", description: "–§–æ—Ä–º–∞—Ç –¥–ª—è vis-network"}
          ‚îî‚îÄ‚Üí meth:GraphVertex.to_svg_format
                properties: {returns: "string", description: "–§–æ—Ä–º–∞—Ç –¥–ª—è SVG"}
        
        cls:GraphEdge (–ö–ª–∞—Å—Å: GraphEdge)
          properties: {
            extends: "cls:GraphObject",
            backend_module: "models.edges.graph_edge",
            frontend_module: "models/edges/GraphEdge.js"
          }
          ‚îú‚îÄ‚Üí prop:GraphEdge.from_id
          ‚îÇ     properties: {type: "string", required: true}
          ‚îú‚îÄ‚Üí prop:GraphEdge.to_id
          ‚îÇ     properties: {type: "string", required: true}
          ‚îú‚îÄ‚Üí prop:GraphEdge.edge_type
          ‚îÇ     properties: {type: "enum", values: ["uses", "depends", "related", "contains"]}
          ‚îú‚îÄ‚Üí prop:GraphEdge.projects
          ‚îÇ     properties: {type: "array", items: "string"}
          ‚îú‚îÄ‚Üí meth:GraphEdge.get_visual_style
          ‚îî‚îÄ‚Üí meth:GraphEdge.to_vis_format
        
        # –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–ª–∞—Å—Å—ã –≤–µ—Ä—à–∏–Ω
        cls:ConceptVertex (–ö–ª–∞—Å—Å: ConceptVertex)
          properties: {
            extends: "cls:GraphVertex",
            node_type: "concept",
            key_prefix: "c:",
            backend_module: "models.vertices.concept_vertex",
            frontend_module: "models/vertices/ConceptVertex.js"
          }
        
        cls:TechnologyVertex (–ö–ª–∞—Å—Å: TechnologyVertex)
          properties: {
            extends: "cls:GraphVertex",
            node_type: "technology",
            key_prefix: "t:",
            backend_module: "models.vertices.technology_vertex",
            frontend_module: "models/vertices/TechnologyVertex.js"
          }
          ‚îú‚îÄ‚Üí prop:TechnologyVertex.version
          ‚îÇ     properties: {type: "string"}
          ‚îî‚îÄ‚Üí prop:TechnologyVertex.official_site
                properties: {type: "url"}
        
        cls:VersionVertex (–ö–ª–∞—Å—Å: VersionVertex)
          properties: {
            extends: "cls:GraphVertex",
            node_type: "version",
            key_prefix: "v:",
            backend_module: "models.vertices.version_vertex",
            frontend_module: "models/vertices/VersionVertex.js"
          }
        
        # === –ë–ò–ó–ù–ï–°-–ö–õ–ê–°–°–´ ===
        
        cls:Project (–ö–ª–∞—Å—Å: Project) üéØ
          properties: {
            extends: "cls:ConceptVertex",
            key_pattern: "^c:project$",
            backend_module: "models.business.project",
            frontend_module: "models/business/Project.js",
            description: "–ü—Ä–æ–µ–∫—Ç –≤ —Å–∏—Å—Ç–µ–º–µ fedoc"
          }
          # –°–≤–æ–π—Å—Ç–≤–∞
          ‚îú‚îÄ‚Üí prop:Project.name
          ‚îÇ     properties: {type: "string", required: true, description: "–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞"}
          ‚îú‚îÄ‚Üí prop:Project.description
          ‚îÇ     properties: {type: "string", description: "–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞"}
          ‚îú‚îÄ‚Üí prop:Project.repository_url
          ‚îÇ     properties: {type: "url", description: "URL —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è"}
          ‚îú‚îÄ‚Üí prop:Project.tech_stack
          ‚îÇ     properties: {type: "array", items: "string", description: "–°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π"}
          # –°–≤—è–∑–∏
          ‚îú‚îÄ‚Üí rel:Project.has_backends
          ‚îÇ     properties: {
          ‚îÇ       type: "one_to_many",
          ‚îÇ       target: "cls:Backend",
          ‚îÇ       edge_type: "contains",
          ‚îÇ       description: "–ë–∞–∫–µ–Ω–¥—ã –ø—Ä–æ–µ–∫—Ç–∞"
          ‚îÇ     }
          ‚îú‚îÄ‚Üí rel:Project.has_frontends
          ‚îÇ     properties: {type: "one_to_many", target: "cls:Frontend", edge_type: "contains"}
          ‚îú‚îÄ‚Üí rel:Project.uses_technologies
          ‚îÇ     properties: {type: "many_to_many", target: "cls:TechnologyVertex", edge_type: "uses"}
          # –ú–µ—Ç–æ–¥—ã
          ‚îú‚îÄ‚Üí meth:Project.get_backends
          ‚îÇ     properties: {
          ‚îÇ       returns: "List[Backend]",
          ‚îÇ       description: "–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –±–∞–∫–µ–Ω–¥—ã –ø—Ä–æ–µ–∫—Ç–∞",
          ‚îÇ       lazy: true,
          ‚îÇ       params: {repository: "optional"}
          ‚îÇ     }
          ‚îú‚îÄ‚Üí meth:Project.add_backend
          ‚îÇ     properties: {
          ‚îÇ       returns: "void",
          ‚îÇ       params: {backend: "Backend", repository: "optional"}
          ‚îÇ     }
          ‚îî‚îÄ‚Üí meth:Project.get_technology_stack
                properties: {
                  returns: "List[string]",
                  description: "–ü–æ–ª–Ω—ã–π —Å—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π (–≤–∫–ª—é—á–∞—è –¥–æ—á–µ—Ä–Ω–∏–µ)",
                  lazy: true
                }
        
        cls:Backend (–ö–ª–∞—Å—Å: Backend) üéØ
          properties: {
            extends: "cls:ConceptVertex",
            key_pattern: "^c:backend",
            backend_module: "models.business.backend",
            frontend_module: "models/business/Backend.js",
            description: "–ë–∞–∫–µ–Ω–¥ –ø—Ä–æ–µ–∫—Ç–∞"
          }
          ‚îú‚îÄ‚Üí prop:Backend.framework
          ‚îÇ     properties: {type: "string", description: "–§—Ä–µ–π–º–≤–æ—Ä–∫ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Flask, Spring Boot)"}
          ‚îú‚îÄ‚Üí prop:Backend.database
          ‚îÇ     properties: {type: "string", description: "–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö"}
          ‚îú‚îÄ‚Üí prop:Backend.api_type
          ‚îÇ     properties: {
          ‚îÇ       type: "enum",
          ‚îÇ       values: ["REST", "GraphQL", "gRPC"],
          ‚îÇ       default: "REST"
          ‚îÇ     }
          ‚îú‚îÄ‚Üí rel:Backend.belongs_to_project
          ‚îÇ     properties: {type: "many_to_one", target: "cls:Project", edge_type: "contains", inverse: true}
          ‚îú‚îÄ‚Üí rel:Backend.uses_technologies
          ‚îÇ     properties: {type: "many_to_many", target: "cls:TechnologyVertex", edge_type: "uses"}
          ‚îú‚îÄ‚Üí meth:Backend.get_project
          ‚îÇ     properties: {returns: "Project", lazy: true}
          ‚îî‚îÄ‚Üí meth:Backend.get_technologies
                properties: {returns: "List[TechnologyVertex]", lazy: true}
        
        cls:Frontend (–ö–ª–∞—Å—Å: Frontend) üéØ
          properties: {
            extends: "cls:ConceptVertex",
            key_pattern: "^c:frontend",
            backend_module: "models.business.frontend",
            frontend_module: "models/business/Frontend.js"
          }
          ‚îú‚îÄ‚Üí prop:Frontend.framework
          ‚îú‚îÄ‚Üí prop:Frontend.build_tool
          ‚îî‚îÄ‚Üí rel:Frontend.belongs_to_project
      
      # === –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø –í–ò–ó–£–ê–õ–ò–ó–ê–¶–ò–ò ===
      c:visualization-config (–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏) üÜï
        
        c:canvas-config (–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–∞–Ω–≤—ã)
          properties: {
            dark: {background: "#111"},
            light: {background: "#f5f5f5"}
          }
        
        c:node-styles (–°—Ç–∏–ª–∏ —É–∑–ª–æ–≤)
          c:category-style (–°—Ç–∏–ª—å: category)
            properties: {
              dark: {
                color: "#1976D2",
                border: "#0D47A1",
                shape: "box",
                size: {width: 120, height: 36, borderRadius: 6, borderWidth: 1, margin: 10},
                font: {color: "#ffffff", size: 12, strokeWidth: 2, strokeColor: "#1976D2"}
              },
              light: {
                color: "#E3F2FD",
                border: "#90CAF9",
                shape: "box",
                size: {width: 120, height: 36, borderRadius: 6, borderWidth: 1, margin: 10},
                font: {color: "#000000", size: 12, strokeWidth: 2, strokeColor: "#E3F2FD"}
              }
            }
          
          c:technology-style (–°—Ç–∏–ª—å: technology)
            properties: {
              dark: {
                color: "#388E3C",
                border: "#1B5E20",
                shape: "circle",
                size: {size: 36, borderWidth: 1, margin: 10},
                font: {color: "#ffffff", size: 12, strokeWidth: 2, strokeColor: "#388E3C"}
              },
              light: {
                color: "#E8F5E9",
                border: "#81C784",
                shape: "circle",
                size: {size: 36, borderWidth: 1, margin: 10},
                font: {color: "#000000", size: 12, strokeWidth: 2, strokeColor: "#E8F5E9"}
              }
            }
          
          c:version-style (–°—Ç–∏–ª—å: version)
            # ... –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ
        
        c:edge-styles (–°—Ç–∏–ª–∏ —Ä—ë–±–µ—Ä)
          c:smooth-config (–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫—Ä–∏–≤–∏–∑–Ω—ã)
            properties: {
              type: "cubicBezier",
              roundness: 0.5,
              forceDirection: "vertical"
            }
          
          c:uses-style (–°—Ç–∏–ª—å: uses)
            properties: {color: "#B0BEC5", dashes: false}
          
          c:depends-style (–°—Ç–∏–ª—å: depends)
            properties: {color: "#FF6F00", dashes: true}
        
        c:layout-config (–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ä–∞—Å–∫–ª–∞–¥–∫–∏)
          properties: {
            hierarchical: {
              enabled: true,
              direction: "UD",
              sortMethod: "directed",
              levelSeparation: 140,
              nodeSpacing: 180,
              treeSpacing: 240
            }
          }
        
        c:physics-config (–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ñ–∏–∑–∏–∫–∏)
          properties: {
            enabled: true,
            solver: "hierarchicalRepulsion",
            hierarchicalRepulsion: {
              nodeDistance: 160,
              springLength: 160,
              damping: 0.45,
              avoidOverlap: 1
            }
          }
        
        c:interaction-config (–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è)
          properties: {
            hover: true,
            multiselect: true,
            zoomView: true,
            dragView: true
          }
      
      # === API –ö–û–ù–¢–†–ê–ö–¢ ===
      c:api-contract (API –∫–æ–Ω—Ç—Ä–∞–∫—Ç) üÜï
        
        c:endpoint-get-graph (GET /api/graph)
          properties: {
            path: "/api/graph",
            method: "GET",
            description: "–ü–æ–ª—É—á–∏—Ç—å –≥—Ä–∞—Ñ –ø—Ä–æ–µ–∫—Ç–∞",
            params: {
              project: {type: "string", required: true},
              theme: {type: "string", enum: ["dark", "light"], default: "light"}
            },
            response: {
              type: "object",
              properties: {
                nodes: {type: "array", items: "GraphVertex"},
                edges: {type: "array", items: "GraphEdge"}
              }
            }
          }
        
        c:endpoint-create-vertex (POST /api/vertices)
          properties: {
            path: "/api/vertices",
            method: "POST",
            request_body: "GraphVertex",
            response: "GraphVertex"
          }
        
        # ... –¥—Ä—É–≥–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
```

---

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å graph_traverse_down

### –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã MCP

**–§–∞–π–ª**: `src/mcp_server/handlers/graph_traverse_down.py`

```python
def handle_graph_traverse_down(project: str, include_metadata: bool = True) -> str:
    """
    –û–±—Ö–æ–¥ –≥—Ä–∞—Ñ–∞ —Å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º –≤–∫–ª—é—á–µ–Ω–∏–µ–º –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
    
    Args:
        project: –ö–ª—é—á –ø—Ä–æ–µ–∫—Ç–∞ (fedoc, fepro, femsq)
        include_metadata: –í–∫–ª—é—á–∏—Ç—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∫–ª–∞—Å—Å–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é True)
    
    Returns:
        Markdown –¥–æ–∫—É–º–µ–Ω—Ç —Å –ø–æ–ª–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –ø—Ä–æ–µ–∫—Ç–∞
    """
    output = []
    
    # 1. –û–±—ã—á–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
    output.append(f"# –ü—Ä–æ–µ–∫—Ç: {project}\n")
    output.append(traverse_project_structure(project))
    
    # 2. –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (–µ—Å–ª–∏ –∑–∞–ø—Ä–æ—à–µ–Ω–æ)
    if include_metadata:
        output.append("\n" + "="*80 + "\n")
        output.append("# –ú–ï–¢–ê–î–ê–ù–ù–´–ï –ü–†–û–ï–ö–¢–ê\n")
        
        output.append("\n## –°–∏—Å—Ç–µ–º–∞ –∫–ª–∞—Å—Å–æ–≤\n")
        output.append(traverse_class_system())
        
        output.append("\n## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏\n")
        output.append(traverse_visualization_config())
        
        output.append("\n## API –∫–æ–Ω—Ç—Ä–∞–∫—Ç\n")
        output.append(traverse_api_contract())
    
    return '\n'.join(output)

def traverse_class_system() -> str:
    """–û–±—Ö–æ–¥ —Å–∏—Å—Ç–µ–º—ã –∫–ª–∞—Å—Å–æ–≤"""
    # –ù–∞–π—Ç–∏ —É–∑–µ–ª c:class-system
    query = """
    SELECT id, key, name, properties
    FROM canonical_nodes
    WHERE key = 'c:class-system'
    """
    
    class_system = db.execute(query).fetchone()
    if not class_system:
        return "*–°–∏—Å—Ç–µ–º–∞ –∫–ª–∞—Å—Å–æ–≤ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞*"
    
    # –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∫–ª–∞—Å—Å—ã
    classes = get_child_nodes(class_system['id'], prefix='cls:')
    
    output = []
    for cls in classes:
        output.append(format_class_definition(cls))
    
    return '\n'.join(output)

def format_class_definition(cls_node: dict) -> str:
    """–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–ª–∞—Å—Å–∞ –¥–ª—è AI"""
    props = cls_node.get('properties', {})
    
    lines = [
        f"### {cls_node['name']}",
        f"**–ö–ª—é—á**: `{cls_node['key']}`",
        ""
    ]
    
    # –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∫–ª–∞—Å—Å–∞
    if props.get('extends'):
        lines.append(f"**–ù–∞—Å–ª–µ–¥—É–µ—Ç**: `{props['extends']}`")
    if props.get('abstract'):
        lines.append("**–ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π**: –î–∞")
    if props.get('key_pattern'):
        lines.append(f"**–ü–∞—Ç—Ç–µ—Ä–Ω –∫–ª—é—á–∞**: `{props['key_pattern']}`")
    if props.get('backend_module'):
        lines.append(f"**–ú–æ–¥—É–ª—å (Python)**: `{props['backend_module']}`")
    if props.get('frontend_module'):
        lines.append(f"**–ú–æ–¥—É–ª—å (JS)**: `{props['frontend_module']}`")
    if props.get('description'):
        lines.append(f"\n{props['description']}")
    
    # –°–≤–æ–π—Å—Ç–≤–∞ –∫–ª–∞—Å—Å–∞
    properties = get_class_properties(cls_node['id'])
    if properties:
        lines.append("\n**–°–≤–æ–π—Å—Ç–≤–∞**:")
        for prop in properties:
            prop_props = prop.get('properties', {})
            prop_type = prop_props.get('type', 'any')
            required = " *(–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ)*" if prop_props.get('required') else ""
            description = f" ‚Äî {prop_props['description']}" if prop_props.get('description') else ""
            lines.append(f"- `{prop['name']}`: {prop_type}{required}{description}")
    
    # –ú–µ—Ç–æ–¥—ã –∫–ª–∞—Å—Å–∞
    methods = get_class_methods(cls_node['id'])
    if methods:
        lines.append("\n**–ú–µ—Ç–æ–¥—ã**:")
        for method in methods:
            meth_props = method.get('properties', {})
            returns = meth_props.get('returns', 'void')
            params_dict = meth_props.get('params', {})
            params = ', '.join([f"{k}: {v}" for k, v in params_dict.items()])
            description = meth_props.get('description', '')
            
            lines.append(f"- `{method['name']}({params})` ‚Üí `{returns}`")
            if description:
                lines.append(f"  {description}")
    
    # –°–≤—è–∑–∏ –∫–ª–∞—Å—Å–∞
    relations = get_class_relations(cls_node['id'])
    if relations:
        lines.append("\n**–°–≤—è–∑–∏**:")
        for rel in relations:
            rel_props = rel.get('properties', {})
            rel_type = rel_props.get('type', 'unknown')
            target = rel_props.get('target', 'unknown')
            edge_type = rel_props.get('edge_type', '')
            edge_info = f" (—á–µ—Ä–µ–∑ `{edge_type}`)" if edge_type else ""
            lines.append(f"- `{rel['name']}`: {rel_type} ‚Üí `{target}`{edge_info}")
    
    lines.append("")  # –ü—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ –º–µ–∂–¥—É –∫–ª–∞—Å—Å–∞–º–∏
    return '\n'.join(lines)

def get_class_properties(class_id: int) -> list:
    """–ü–æ–ª—É—á–∏—Ç—å —Å–≤–æ–π—Å—Ç–≤–∞ –∫–ª–∞—Å—Å–∞"""
    query = """
    SELECT v.id, v.key, v.name, v.properties
    FROM canonical_nodes v
    JOIN project_relations e ON e.to_node = v.id
    WHERE e.from_node = %s AND v.key LIKE 'prop:%%'
    ORDER BY v.name
    """
    return db.execute(query, (class_id,)).fetchall()

def get_class_methods(class_id: int) -> list:
    """–ü–æ–ª—É—á–∏—Ç—å –º–µ—Ç–æ–¥—ã –∫–ª–∞—Å—Å–∞"""
    query = """
    SELECT v.id, v.key, v.name, v.properties
    FROM canonical_nodes v
    JOIN project_relations e ON e.to_node = v.id
    WHERE e.from_node = %s AND v.key LIKE 'meth:%%'
    ORDER BY v.name
    """
    return db.execute(query, (class_id,)).fetchall()

def get_class_relations(class_id: int) -> list:
    """–ü–æ–ª—É—á–∏—Ç—å —Å–≤—è–∑–∏ –∫–ª–∞—Å—Å–∞"""
    query = """
    SELECT v.id, v.key, v.name, v.properties
    FROM canonical_nodes v
    JOIN project_relations e ON e.to_node = v.id
    WHERE e.from_node = %s AND v.key LIKE 'rel:%%'
    ORDER BY v.name
    """
    return db.execute(query, (class_id,)).fetchall()
```

---

## MCP –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–ª–∞—Å—Å–∞–º–∏

### –ù–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã

**–§–∞–π–ª**: `src/mcp_server/handlers/class_operations.py`

```python
@mcp_tool()
def class_create(
    class_key: str,
    class_name: str,
    extends: Optional[str] = None,
    abstract: bool = False,
    backend_module: Optional[str] = None,
    frontend_module: Optional[str] = None,
    description: str = ''
) -> dict:
    """
    –°–æ–∑–¥–∞—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–ª–∞—Å—Å–∞ –≤ –≥—Ä–∞—Ñ–µ
    
    Args:
        class_key: –ö–ª—é—á –∫–ª–∞—Å—Å–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä 'cls:Project')
        class_name: –ù–∞–∑–≤–∞–Ω–∏–µ –∫–ª–∞—Å—Å–∞
        extends: –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –∫–ª–∞—Å—Å (–∫–ª—é—á, –Ω–∞–ø—Ä–∏–º–µ—Ä 'cls:ConceptVertex')
        abstract: –Ø–≤–ª—è–µ—Ç—Å—è –ª–∏ –∫–ª–∞—Å—Å –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–º
        backend_module: –ü—É—Ç—å –∫ –º–æ–¥—É–ª—é –Ω–∞ –±–∞–∫–µ–Ω–¥–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä 'models.business.project')
        frontend_module: –ü—É—Ç—å –∫ –º–æ–¥—É–ª—é –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä 'models/business/Project.js')
        description: –û–ø–∏—Å–∞–Ω–∏–µ –∫–ª–∞—Å—Å–∞
    
    Returns:
        {"status": "success", "class_id": "..."}
    """

@mcp_tool()
def class_add_property(
    class_key: str,
    property_name: str,
    property_type: str,
    required: bool = False,
    default: Optional[Any] = None,
    pattern: Optional[str] = None,
    description: str = ''
) -> dict:
    """–î–æ–±–∞–≤–∏—Ç—å —Å–≤–æ–π—Å—Ç–≤–æ –∫ –∫–ª–∞—Å—Å—É"""

@mcp_tool()
def class_add_method(
    class_key: str,
    method_name: str,
    returns: str,
    params: Optional[Dict[str, str]] = None,
    description: str = '',
    lazy: bool = False
) -> dict:
    """–î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ –∫ –∫–ª–∞—Å—Å—É"""

@mcp_tool()
def class_add_relation(
    class_key: str,
    relation_name: str,
    relation_type: str,  # one_to_many, many_to_one, many_to_many
    target_class: str,
    edge_type: str = 'related',
    description: str = ''
) -> dict:
    """–î–æ–±–∞–≤–∏—Ç—å —Å–≤—è–∑—å –º–µ–∂–¥—É –∫–ª–∞—Å—Å–∞–º–∏"""

@mcp_tool()
def class_regenerate_code(class_key: Optional[str] = None) -> dict:
    """
    –†–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ –∫–ª–∞—Å—Å–æ–≤ –∏–∑ –≥—Ä–∞—Ñ–∞
    
    Args:
        class_key: –ö–ª—é—á –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞ (–µ—Å–ª–∏ None - –≤—Å–µ –∫–ª–∞—Å—Å—ã)
    
    Returns:
        {"status": "success", "generated_files": [...]}
    """
```

---

## –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∫–æ–¥–∞ –∏–∑ –≥—Ä–∞—Ñ–∞

### –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç

**–§–∞–π–ª**: `tools/generate_from_graph.py`

–ß–∏—Ç–∞–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∏–∑ –≥—Ä–∞—Ñ–∞ –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–ª–∞—Å—Å—ã –¥–ª—è Python –∏ JavaScript.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
```bash
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –∫–ª–∞—Å—Å–æ–≤
python tools/generate_from_graph.py

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞
python tools/generate_from_graph.py --class cls:Project

# –¢–æ–ª—å–∫–æ –±–∞–∫–µ–Ω–¥
python tools/generate_from_graph.py --backend-only

# –¢–æ–ª—å–∫–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
python tools/generate_from_graph.py --frontend-only
```

### –®–∞–±–ª–æ–Ω—ã

**`tools/templates/python_class.jinja2`** ‚Äî —à–∞–±–ª–æ–Ω –¥–ª—è Python –∫–ª–∞—Å—Å–æ–≤
**`tools/templates/js_class.jinja2`** ‚Äî —à–∞–±–ª–æ–Ω –¥–ª—è JavaScript –∫–ª–∞—Å—Å–æ–≤

---

## –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ .cursorrules

```markdown
## üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: –ö–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–æ–µ–∫—Ç–∞

### –í –Ω–∞—á–∞–ª–µ –ö–ê–ñ–î–û–ì–û —á–∞—Ç–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç—å:
```
graph_traverse_down(project="fedoc", include_metadata=true)
```

**–ß—Ç–æ –≤–∫–ª—é—á–∞–µ—Ç –≤—ã–≤–æ–¥ —Å `include_metadata=true`**:
1. **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞**: –ò–µ—Ä–∞—Ä—Ö–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π
2. **–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∫–ª–∞—Å—Å–æ–≤**: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≤—Å–µ—Ö –∫–ª–∞—Å—Å–æ–≤ (–±–∞–∑–æ–≤—ã—Ö –∏ –±–∏–∑–Ω–µ—Å)
3. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏**: –°—Ç–∏–ª–∏ —É–∑–ª–æ–≤, —Ä—ë–±–µ—Ä, layout, physics
4. **API –∫–æ–Ω—Ç—Ä–∞–∫—Ç**: –û–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

**–ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ**:
- –ì—Ä–∞—Ñ ‚Äî –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã –æ –ø—Ä–æ–µ–∫—Ç–µ –ò –µ–≥–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ
- AI –ø–æ–ª—É—á–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫–ª–∞—Å—Å–æ–≤ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—É—Å–∫–µ
- –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Å—Ö–µ–º–µ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –≤–∏–¥–Ω—ã –≤—Å–µ–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º
- –ù–µ—Ç —Ä–∞–∑–Ω–æ—á—Ç–µ–Ω–∏–π –º–µ–∂–¥—É –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π –∏ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å—é
- –ù–∞ –∫–ª–∏–µ–Ω—Ç–µ —Ö—Ä–∞–Ω—è—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å–µ–∫—Ä–µ—Ç—ã, –≤—Å—è –ª–æ–≥–∏–∫–∞ –≤ –≥—Ä–∞—Ñ–µ
```

---

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

‚úÖ **–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã**: –ì—Ä–∞—Ñ (–Ω–µ YAML, –Ω–µ JSON)  
‚úÖ **AI –≤—Å–µ–≥–¥–∞ –∞–∫—Ç—É–∞–ª–µ–Ω**: –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –≤ –Ω–∞—á–∞–ª–µ –∫–∞–∂–¥–æ–≥–æ —á–∞—Ç–∞  
‚úÖ **–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –∫–ª–∞—Å—Å–æ–≤ –≤ –≥—Ä–∞—Ñ–µ  
‚úÖ **–ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è**: –ù–∏–∫–∞–∫–∏—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤  
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è**: –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã —á–∏—Ç–∞—é—Ç –≥—Ä–∞—Ñ  
‚úÖ **–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è**: –ö–ª–∞—Å—Å—ã –≤–∏–¥–Ω—ã –≤ Graph Viewer  
‚úÖ **MCP –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: AI –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω—è—Ç—å —Å—Ö–µ–º—É –∫–æ–º–∞–Ω–¥–∞–º–∏  
‚úÖ **–§–∏–ª–æ—Å–æ—Ñ–∏—è fedoc**: –í—Å—ë –≤ –≥—Ä–∞—Ñ–µ, –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ —Ç–æ–ª—å–∫–æ —Å–µ–∫—Ä–µ—Ç—ã  
‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã  
‚úÖ **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å**: –§—Ä–æ–Ω—Ç–µ–Ω–¥ –∏ –±–∞–∫–µ–Ω–¥ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–Ω—É —Å—Ö–µ–º—É

---

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –º–µ—Ç–∞—É–∑–ª–æ–≤ –≤ –≥—Ä–∞—Ñ–µ
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é `graph_traverse_down`
3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∫–æ–¥–∞ `tools/generate_from_graph.py`
4. –°–æ–∑–¥–∞—Ç—å MCP –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–ª–∞—Å—Å–∞–º–∏
5. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª: –≥—Ä–∞—Ñ ‚Üí –≥–µ–Ω–µ—Ä–∞—Ü–∏—è ‚Üí –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
6. –û–±–Ω–æ–≤–∏—Ç—å `.cursorrules`

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è**: 2025-11-04  
**–ê–≤—Ç–æ—Ä**: –ê–ª–µ–∫—Å–∞–Ω–¥—Ä  
**–í–µ—Ä—Å–∏—è**: 1.0

