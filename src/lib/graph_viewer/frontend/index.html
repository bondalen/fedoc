<!doctype html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ArangoDB Graph Viewer</title>
  </head>
  <body>
    <div id="app" x-data="graphViewer()">
      <!-- –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
      <div id="controls">
        <h3>üéõÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥—Ä–∞—Ñ–æ–º</h3>
        
        <div class="row">
          <label>–°—Ç–∞—Ä—Ç–æ–≤–∞—è –≤–µ—Ä—à–∏–Ω–∞:</label>
          <select x-model="startNode" @change="loadGraph()">
            <template x-for="node in nodes" :key="node._id">
              <option :value="node._id" x-text="`${node._key} - ${node.name}`"></option>
            </template>
          </select>
        </div>
        
        <div class="row">
          <label>–ì–ª—É–±–∏–Ω–∞ –æ–±—Ö–æ–¥–∞:</label>
          <input type="range" x-model="depth" min="1" max="15" @change="loadGraph()" />
          <span x-text="depth"></span>
        </div>
        
        <div class="row">
          <label>–ü—Ä–æ–µ–∫—Ç:</label>
          <select x-model="project" @change="loadNodes(); loadGraph();">
            <option value="">–í—Å–µ –ø—Ä–æ–µ–∫—Ç—ã</option>
            <option value="fepro">FEPRO</option>
            <option value="femsq">FEMSQ</option>
            <option value="fedoc">FEDOC</option>
          </select>
        </div>
        
        <div class="row">
          <label>–¢–µ–º–∞:</label>
          <label><input type="radio" x-model="theme" value="dark" @change="applyTheme()"> üåô –¢—ë–º–Ω–∞—è</label>
          <label><input type="radio" x-model="theme" value="light" @change="applyTheme()"> ‚òÄÔ∏è –°–≤–µ—Ç–ª–∞—è</label>
        </div>
        
        <div class="row buttons">
          <button @click="loadGraph()" class="btn-primary">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
          <button @click="fitGraph()" class="btn-success">üìê –ü–æ–¥–æ–≥–Ω–∞—Ç—å</button>
        </div>
        
        <div class="stats">
          –£–∑–ª–æ–≤: <span x-text="nodeCount"></span> ‚Ä¢ –†—ë–±–µ—Ä: <span x-text="edgeCount"></span>
        </div>
      </div>
      
      <!-- –ì—Ä–∞—Ñ -->
      <div id="graph" :class="{ 'with-panel': showDetails }"></div>
      
      <!-- –ü–∞–Ω–µ–ª—å –¥–µ—Ç–∞–ª–µ–π -->
      <div id="detailsPanel" :class="{ 'visible': showDetails }">
        <div id="detailsHeader">
          <h3>–î–µ—Ç–∞–ª–∏ –æ–±—ä–µ–∫—Ç–∞</h3>
          <button @click="closeDetails()">‚úï</button>
        </div>
        <div id="detailsContent">
          <template x-if="!selectedObject">
            <div style="color: #666; font-style: italic;">–í—ã–±–µ—Ä–∏—Ç–µ —É–∑–µ–ª –∏–ª–∏ —Ä–µ–±—Ä–æ –Ω–∞ –≥—Ä–∞—Ñ–µ</div>
          </template>
          <template x-if="selectedObject">
            <div x-html="renderObject(selectedObject, 0, '', '_root')"></div>
          </template>
        </div>
      </div>
      
      <!-- Resizer -->
      <div id="resizer" :class="{ 'visible': showDetails }" 
           @mousedown="startResize($event)"></div>
    </div>
    
    <script type="module" src="/src/main.js"></script>
  </body>
</html>
